const t=[1,0,3,2],o="$*$-$0$4$-$3$9$?$2$=%5%9$7%5%='3$=%;'5'9%5'3';'?%7'5)5(=%;'9)9)=%A(9+7+;'5(=+;+?'7(A+?.;';+9-=.?'=,9/;39'A,;373;)9-;/A5;);-?4;3A)?.?3?6?)A0=5?8?*?1=8=<=+?3=7A<?+?4=:?<A,?4?:AE;,A5?<AAA-A7?>ACA/=8?@AFA/?:?E?HA/A<?EAKA0A=?FAMA1A??IAPA2A@?KASA3AB?NAVA4AD?PAYA5AF?SA\\A6AH?VA_A6AI?XAbA7AK?[AeA8AN?^AiA9AP?aAmA;AR?dApA<AT?gAtA",e=(e,n)=>r=>{const c=8*e+2*r-8,s=o.charCodeAt(c)-35,f=o.charCodeAt(c+1)-35,a=n/s-f|0,i=n%s,l=s-i;return{t:t[r],o:8*(l*a+i*(a+1)),l:i?[[l,a],[i,a+1]]:[[l,a]],u:f}},n={min:0,L:0,M:1,Q:2,H:3,max:3},r=t=>new Uint8Array(t),c=t=>{const o=new Error(`lean-qr error ${t}`);throw o.code=t,o},s=t=>"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:".indexOf(t),f=t=>t.charCodeAt(0),a=(...t)=>(o,e)=>t.forEach((t=>t(o,e))),i=t=>o=>{o.eci!==t&&(o.push(7,4),o.push(t,8),o.eci=t)},l=t=>(o,e)=>{o.push(4,4),o.push(t.length,8+8*(e>9)),t.forEach((t=>o.push(t,8)))},u=(t,o,e,n,r=(n?o=>a(i(n),t(o)):t))=>(r.test=o,r.est=e,r.eci=n,r),A=u((t=>(o,e)=>{o.push(1,4),o.push(t.length,10+2*(e>26)+2*(e>9));let n=0;for(;n<t.length-2;n+=3)o.push(+t.slice(n,n+3),10);n<t.length-1?o.push(+t.slice(n,n+2),7):n<t.length&&o.push(+t[n],4)}),/./.test.bind(/[0-9]/),((t,o)=>14+2*(o>26)+2*(o>9)+10*t.length/3)),d=u((t=>(o,e)=>{o.push(2,4),o.push(t.length,9+2*(e>26)+2*(e>9));let n=0;for(;n<t.length-1;n+=2)o.push(45*s(t[n])+s(t[n+1]),11);n<t.length&&o.push(s(t[n]),6)}),(t=>s(t)>=0),((t,o)=>13+2*(o>26)+2*(o>9)+5.5*t.length)),m=u((t=>l([...t].map(f))),(t=>f(t)<128),((t,o)=>12+8*(o>9)+8*t.length)),h=u(m,(t=>f(t)<256),m.est,3),g=new TextEncoder,p=u((t=>l(g.encode(t))),(()=>1),((t,o)=>12+8*(o>9)+8*g.encode(t).length),26);let v=()=>{const t=new Map,o=new TextDecoder("sjis"),e=r(2);for(const[n,r,c]of[[33088,40957,33088],[57408,60352,49472]])for(let s=n;s<r;++s)e[0]=s>>8,e[1]=255&s,t.set(o.decode(e),192*(s-c>>8)+(s-c&255));return t.delete("\ufffd"),v=()=>t,t};const $=u((t=>(o,e)=>{o.push(8,4),o.push(t.length,8+2*(e>26)+2*(e>9));for(const e of t)o.push(v().get(e),13)}),(t=>v().has(t)),((t,o)=>12+2*(o>26)+2*(o>9)+13*t.length)),b=t=>t.reduce(((t,o)=>o.A<t.A?o:t)),w=[A,d,m,h,$,p],x=(t,{modes:o=w}={})=>(e,n)=>{let r=[{A:0}];for(let e=0;e<t.length;++e)r=o.filter((o=>o.test(t[e]))).map((o=>b(r.map((r=>{const c=r.m===o?r.h:e,s=r.m===o?r.g:r,f=t.slice(c,e+1),a=o.eci??s.v;return{m:o,g:s,h:c,$:f,A:s.A+12*(a!==s.i)+Math.ceil(o.est(f,n)),v:a}}))))),r.length||c(5);const s=[];for(let t=b(r);t.m;t=t.g)s.unshift(t.m(t.$));s.forEach((t=>t(e,n)))},_=()=>({_:r(2956),k:0,push(t,o){for(let e=o,n=8-(7&this.k);e>0;e-=n,n=8)this._[this.k>>3]|=t<<n>>e,this.k+=e<n?e:n}}),k=(t,o=t*t,e=r(o))=>({size:t,N:e,get:(o,n)=>o>=0&&o<t&&!!(1&e[n*t+o]),B:(o,n)=>2&e[n*t+o],D(o,n,r,c=1){e[n*t+o]=2*c|!!r},U(o,n){e[n*t+o]^=1},toString({on:o="##",off:e="  ",lf:n="\n",padX:r=4,padY:c=4}={}){let s="";for(let f=-c;f<t+c;++f){for(let n=-r;n<t+r;++n)s+=this.get(n,f)?o:e;s+=n}return s},toImageData(o,{on:e=[0,0,0],off:n=[0,0,0,0],padX:r=4,padY:c=4}={}){const s=t+2*r,f=t+2*c,a=o.createImageData(s,f),i=new Uint32Array(a.data.buffer);a.data.set([...e,255]);const l=i[0];a.data.set([...n,255]);const u=i[0];for(let t=0;t<f;++t)for(let o=0;o<s;++o)i[t*s+o]=this.get(o-r,t-c)?l:u;return a},toCanvas(t,o){const e=t.getContext("2d"),n=this.toImageData(e,o);t.width=n.width,t.height=n.height,e.putImageData(n,0,0)},toDataURL({type:t="image/png",scale:o=1,...e}={}){const n=document.createElement("canvas"),r=n.getContext("2d"),c=this.toImageData(r,e);return n.width=c.width*o,n.height=c.height*o,r.putImageData(c,0,0),r.imageSmoothingEnabled=!1,r.globalCompositeOperation="copy",r.drawImage(n,0,0,c.width,c.height,0,0,n.width,n.height),n.toDataURL(t,1)}}),M=[(t,o)=>!(1&(t^o)),(t,o)=>!(1&o),t=>!(t%3),(t,o)=>!((t+o)%3),(t,o)=>!(1&((t/3|0)^o>>1)),(t,o)=>!((t&o&1)+t*o%3),(t,o)=>!((t&o&1)+t*o%3&1),(t,o)=>!((1&(t^o))+t*o%3&1)],y=r(512);y[0]=1;for(let t=0,o=1;t<255;y[++t]=o)y[o+256]=t,o*=2,256&o&&(o^=285);const N=t=>y[t%255],B=t=>y[t+256],L=(t,o)=>{const e=r(t.length+o.length-1);for(let n=0;n<t.length;++n)for(let r=0;r<o.length;++r)e[n+r]^=N(t[n]+o[r]);return e.map(B)},D=(t,o)=>{const e=r(t.length+o.length-1);e.set(t,0);for(let n=0;n<t.length;++n)if(e[n]){const t=B(e[n]);for(let r=0;r<o.length;++r)e[n+r]^=N(o[r]+t)}return e.slice(t.length)},U=[[0],[0,0]];for(let t=1,o=U[1];t<30;++t){const e=L(o,[0,t]);U.push(e),o=e}const C=(t,o)=>{const e=[[],[]];let n=0,c=0;for(const[r,s]of o.l)for(let f=0;f<r;++f,n+=s){const r=t.slice(n,n+s);e[0].push(r),e[1].push(D(r,U[o.u])),c+=s+o.u}const s=r(c);let f=0;for(const t of e)for(let o,e=0;f!==o;++e){o=f;for(const o of t)e<o.length&&(s[f++]=o[e])}return s},V=(t,o,e)=>{let n=t<<e-1;for(let t=134217728;t;t>>=1)n&t&&(n^=o*(t>>e-1));return n},E=(t,o)=>{const e=(o,e,n,r,c)=>{for(;r-- >0;)for(let s=n;s-- >0;)t.D(o+s,e+r,c)},n=(t,o)=>{e(t-3,o-3,7,7,1),e(t-2,o-2,5,5,0),e(t-1,o-1,3,3,1)},r=(o,n)=>{e(o-2,n-2,5,5,1),e(o-1,n-1,3,3,0),t.D(o,n,1)},c=4*o+17;e(7,0,2,9,0),e(c-8,0,8,9,0);for(let o=0;o<c;++o)t.D(o,6,!(1&o));if(n(3,3),n(c-4,3),o>1){const t=1+(o/7|0),e=2*((c-13)/t/2+.75|0);for(let o=0;o<t;++o){const n=c-7-o*e;o&&r(n,6);for(let o=0;o<t;++o)r(n,c-7-o*e)}}if(o>6)for(let e=o<<12|V(o,7973,13),n=0;n<6;++n)for(let o=12;o-- >9;e>>=1)t.D(c-o,n,1&e);for(let o=0;o<c;++o)for(let e=o;e<c;++e)t.N[e*c+o]=t.N[o*c+e];t.D(8,c-8,1)},S=t=>{const o=t.size,e=[];for(let n=o-2,r=o,c=-1;n>=0;n-=2){for(5===n&&(n=4);r+=c,-1!==r&&r!==o;)t.B(n+1,r)||e.push([n+1,r]),t.B(n,r)||e.push([n,r]);c*=-1}return e},T=(t,o,e)=>{o.forEach((([o,n],r)=>t.D(o,n,e[r>>3]<<(7&r)&128,0)))},F=(t,o,e,n)=>{const r=t.size;for(let e=0;e<r;++e)for(let n=0;n<r;++n)o(n,e)&&!t.B(n,e)&&t.U(n,e);const c=n<<3|e;let s=21522^(c<<10|V(c,1335,11));for(let o=8;o-- >0;s>>=1)t.D(8,(o>1?7:8)-o,1&s),t.D(r-8+o,8,1&s);for(let o=7;o-- >0;s>>=1)t.D(o>5?7:o,8,1&s),t.D(8,r-o-1,1&s)},X=(t,o,e)=>{for(let n=0;n<t.size;++n)for(let r=0,c=o,s=o;r<t.size;++r)c=e(c,t.get(r,n)),s=e(s,t.get(n,r))},Y=t=>((t,o=0)=>(X(t,[0],(([t,e],n)=>n!==e?[1,n]:(4===t?o+=3:t>4&&++o,[t+1,e]))),o))(t)+3*((t,o=0)=>{for(let e=1;e<t.size;++e)for(let n=1,r=t.get(e-1,0),c=t.get(e,0)===r;n<t.size;++n){const s=t.get(e-1,n),f=t.get(e,n)===s;o+=c&&f&&r===s,r=s,c=f}return o})(t)+40*((t,o=0)=>(X(t,0,((t,e)=>{const n=(t>>1|2098176)&(3047517^e-1);return 2049&n&&++o,n})),o))(t)+10*((t,o=0)=>(X(t,0,((t,e)=>o+=e)),20*Math.abs(o/(t.size*t.size*2)-.5)|0))(t),j=[],H=(t=c(1),{minCorrectionLevel:o=n.min,maxCorrectionLevel:r=n.max,minVersion:s=1,maxVersion:f=40,mask:a,trailer:i=60433,...l}={})=>{r<o&&c(3),f<s&&c(2),"string"==typeof t&&(t=x(t,l));for(let n=s,c=0;n<=f;++n){let s=j[n];s||(j[n]=s=k(4*n+17),E(s,n),s.p=S(s));const f=e(n,s.p.length>>3);if(f(o).o<c)continue;const l=_();t(l,n),c=l.k;for(let t=r;t>=o;--t){const o=f(t);if(o.o<c)continue;for(l.push(0,4),l.k=l.k+7&-8;l.k<o.o;)l.push(i,16);const e=k(s.size,s.N);return T(e,s.p,C(l._,o)),(M[a??-1]?[M[a]]:M).map(((t,n)=>{const r=k(e.size,e.N);return F(r,t,a??n,o.t),r.s=Y(r),r})).reduce(((t,o)=>o.s<t.s?o:t))}}c(4)};H.with=(...t)=>(o,e)=>H(o,{modes:[...w,...t],...e});const I="http://www.w3.org/2000/svg",K=/[^-a-zA-Z0-9 .,:/#%()]/g,P=(t,o,e,n=[],r=t.createElementNS(I,o))=>(Object.entries(e).forEach((([t,o])=>r.setAttribute(t,o))),r.replaceChildren(...n),r),R=(t,o,e=[])=>[`<${t}`,...Object.entries(o).map((([t,o])=>` ${t}="${`${o}`.replaceAll(K,"")}"`)),">",...e,`</${t}>`].join(""),z=t=>{const o=new Map,e=[],n=t=>{const e=o.get(t);return o.delete(t),e};for(let r=0;r<=t.size;++r)for(let c=0;c<=t.size;++c){const s=t.get(c,r),f=t.get(c,r-1),a=[t.get(c-1,r)!==s&&c+" "+(r+1),c+" "+r,f!==s&&c+1+" "+r].filter((t=>t));if(a.length>1){s||a.reverse();const t=a.pop(),r=n(a[0])||[],c=n(t);r.push(...a),r===c?e.push(r):(c?c.unshift(...r):o.set(t,r),o.set(r[0],c||r))}}return e.map((t=>`M${t.join("L")}Z`)).join("")},O=(t,{on:o="black",off:e,padX:n=4,padY:r=4,width:c,height:s,scale:f=1},a,i)=>{const l=t.size+2*n,u=t.size+2*r;return a("svg",{xmlns:I,version:"1.1",viewBox:`${-n} ${-r} ${l} ${u}`,width:c??l*f,height:s??u*f,"shape-rendering":"crispedges"},[e?a("rect",{x:-n,y:-r,width:l,height:u,fill:e}):"",a("path",{d:z(t),fill:o})],i)},Z=(t,o)=>"data:image/svg+xml;base64,"+btoa(((t,o={})=>(o.xmlDeclaration?'<?xml version="1.0" encoding="UTF-8" ?>':"")+O(t,o,R))(t,{xmlDeclaration:1,...o})),q={1:"No data",2:"Bad version range",3:"Bad error correction range",4:"Too much data",5:"Data cannot be encoded using requested modes",6:"Bad framework",7:"Bad generate function",8:"Bad toSvgDataURL function"},Q=t=>document.querySelector(`[name="${t}"]`),G=t=>Q(t).value;function J(t,o,e){const n=Number.parseInt(G(t),10);return Number.isNaN(n)?o:Math.max(o,Math.min(e,n))}function W(t,o,e){const n=G(t).toLowerCase().replace(/[^0-9a-f]/g,""),r=Number.parseInt(n,16);return Number.isNaN(r)?o:Math.max(o,Math.min(e,r))}function tt(t){const o=Number.parseInt(G(t).slice(1),16);return[o>>16&255,o>>8&255,255&o,255]}function ot(){const t=G("mask");return"auto"===t?null:Number(t)}const et=document.getElementById("error"),nt=document.querySelector("#output canvas"),rt=document.querySelector("#output pre"),ct=document.querySelector("#output svg"),st=document.querySelector("#download .png"),ft=document.querySelector("#download .svg");let at=null;function it(){at=null,nt.style.display="none",rt.style.display="none",ct.style.display="none",et.style.display="none",st.removeAttribute("href"),ft.removeAttribute("href");try{const t=H(G("message"),{minVersion:J("min-version",1,40),maxVersion:J("max-version",1,40),minCorrectionLevel:n[G("min-correction")],maxCorrectionLevel:n[G("max-correction")],mask:ot(),trailer:W("trailer",0,65535)});switch(at=t,st.setAttribute("href","#"),ft.setAttribute("href","#"),G("format")){case"canvas":t.toCanvas(nt,{on:tt("on"),off:tt("off")}),nt.style.display="block";break;case"text":rt.innerText=t.toString({on:"\u2588\u2588",off:"  "}),rt.style.color=G("on"),rt.style.background=G("off"),rt.style.transform=`scale(${29/(t.size+8)})`,rt.style.display="inline-block";break;case"svg":((t,o,e={})=>{o.body?O(t,e,P.bind(0,o)):O(t,e,P.bind(0,o.ownerDocument),o)})(t,ct,{on:G("on"),off:G("off")}),ct.style.display="block"}}catch(o){et.innerText="object"!=typeof(t=o)?`${t}`||"Unknown error":q[t.code]||t.message||"Unknown error",et.style.display="block"}var t}st.addEventListener("click",(t=>{if(!at)return void t.preventDefault();const o=at.toDataURL({type:"image/png",on:tt("on"),off:tt("off"),scale:10});st.setAttribute("href",o)})),ft.addEventListener("click",(t=>{if(!at)return void t.preventDefault();const o=Z(at,{on:G("on"),off:G("off"),scale:10});ft.setAttribute("href",o)})),document.querySelectorAll("input, select, textarea").forEach((t=>t.addEventListener("input",it))),document.getElementById("reverse-col").addEventListener("click",(()=>{const t=Q("on"),o=Q("off"),e=t.value,n=o.value;t.value=n,o.value=e,it()})),it();
