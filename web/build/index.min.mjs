const o=(o,t)=>t.match(/.{4}/g).map((t=>{const e=t.charCodeAt(0)-35,n=t.charCodeAt(1)-35,r=92*t.charCodeAt(2)+t.charCodeAt(3)-3255,c=r>>5;return{o:o,t:8*(n*c+e*(c+1)),l:e?[[n,c],[e,c+1]]:[[n,c]],u:31&r}})),t=[o(1,"#$)b#$.y#$6>#$?'#$Hq#%:q#%>C#%E##%Ka%%:q#'?G%%C;#'HQ$&KA$(AQ$(EC($HS$(M)'&J[(&HS''K_*%Iw('MI')L%'+H1%-J{'+Mi-&L%**Ka-(KA&0KA#4KA$4KA)0KA*/MI1)MI'4Mi5'Mi'7L%)6LE"),o(0,"#$(a#$,w#$2Y#%.A#%27#',W#'-}%%0M%&/i$'29'$4e%)/i$+0-('13((1S&*2{$-3?',29.&2Y0&1U#41u#43?1'3_1)2{0+3_'63?&92{:&2{*82{-63_@%3?:-3?813?:13?=/3_E)3_1@3?C03?*K3_B53_"),o(3,"#$'`#$*u#%)-#%+]%%(I#')s'%()%')Q''(k%))s''*{)'*9'+*7(.(k*(+a%2)s2$*{$4*{'4*Y(2+a)4*{3*+a1.+a3.+a9*+a)?*{=++AB'+aH$+A<2+a$M+aF-+a6@+a*O+a1J+a-Q+a-T+a1S+a9N+aEE+a"),o(2,"#$&@#$(s#%'i#'&?%%')#'(S$''m%'(1'''K%)(S+&'K'*(3'/')(.'K*.'K0&(U4%(36%(33,'m-2(S)6(u#E'k13(U%A(u09(U'D(u?/(UB.(U=6(U<:(U?:(UF6(UQ.(U$^(uL9(Uc%(UQ;(UCM(Uf-(U`7(U")],e={min:0,L:0,M:1,Q:2,H:3,max:3},n=o=>new Uint8Array(o),r=o=>{const t=new Error(`lean-qr error ${o}`);throw t.code=o,t},c=o=>"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:".indexOf(o),s=o=>o.charCodeAt(0),a=(...o)=>(t,e)=>o.forEach((o=>o(t,e))),f=o=>t=>{t.eci!==o&&(t.push(7,4),t.push(o,8),t.eci=o)},i=o=>(t,e)=>{t.push(4,4),t.push(o.length,8+8*(e>9)),o.forEach((o=>t.push(o,8)))},l=(o,t,e,n,r=(n?t=>a(f(n),o(t)):o))=>(r.test=t,r.est=e,r.eci=n,r),u=l((o=>(t,e)=>{t.push(1,4),t.push(o.length,10+2*(e>26)+2*(e>9));let n=0;for(;n<o.length-2;n+=3)t.push(+o.slice(n,n+3),10);n<o.length-1?t.push(+o.slice(n,n+2),7):n<o.length&&t.push(+o[n],4)}),/./.test.bind(/[0-9]/),((o,t)=>14+2*(t>26)+2*(t>9)+10*o.length/3)),d=l((o=>(t,e)=>{t.push(2,4),t.push(o.length,9+2*(e>26)+2*(e>9));let n=0;for(;n<o.length-1;n+=2)t.push(45*c(o[n])+c(o[n+1]),11);n<o.length&&t.push(c(o[n]),6)}),(o=>c(o)>=0),((o,t)=>13+2*(t>26)+2*(t>9)+5.5*o.length)),m=l((o=>i([...o].map(s))),(o=>s(o)<128),((o,t)=>12+8*(t>9)+8*o.length)),$=l(m,(o=>s(o)<256),m.est,3),h=new TextEncoder,g=l((o=>i(h.encode(o))),(()=>1),((o,t)=>12+8*(t>9)+8*h.encode(o).length),26);let p=()=>{const o=new Map,t=new TextDecoder("sjis"),e=n(2);for(const[n,r,c]of[[33088,40957,33088],[57408,60352,49472]])for(let s=n;s<r;++s)e[0]=s>>8,e[1]=255&s,o.set(t.decode(e),192*(s-c>>8)+(s-c&255));return o.delete("\ufffd"),p=()=>o,o};const v=l((o=>(t,e)=>{t.push(8,4),t.push(o.length,8+2*(e>26)+2*(e>9));for(const e of o)t.push(p().get(e),13)}),(o=>p().has(o)),((o,t)=>12+2*(t>26)+2*(t>9)+13*o.length)),_=o=>o.reduce(((o,t)=>t.m<o.m?t:o)),U=[u,d,m,$,v,g],w=(o,{modes:t=U}={})=>(e,n)=>{let c=[{m:0}];for(let e=0;e<o.length;++e)c=t.filter((t=>t.test(o[e]))).map((t=>_(c.map((r=>{const c=r.$===t?r.h:e,s=r.$===t?r.g:r,a=o.slice(c,e+1),f=t.eci??s.v;return{$:t,g:s,h:c,_:a,m:s.m+12*(f!==s.i)+Math.ceil(t.est(a,n)),v:f}}))))),c.length||r(5);const s=[];for(let o=_(c);o.$;o=o.g)s.unshift(o.$(o._));s.forEach((o=>o(e,n)))},b=o=>({U:n(o),k:0,push(o,t){for(let e=t,n=8-(7&this.k);e>0;e-=n,n=8)this.U[this.k>>>3]|=o<<n>>>e,this.k+=e<n?e:n}}),k=(o,t=o*o,e=n(t))=>({size:o,A:e,K:()=>k(o,e),get:(t,n)=>t>=0&&t<o&&!!(1&e[n*o+t]),B:(t,n)=>2&e[n*o+t],C(t,n,r,c=1){e[n*o+t]=2*c|!!r},S(t,n){e[n*o+t]^=1},toString({on:t="##",off:e="  ",lf:n="\n",padX:r=4,padY:c=4}={}){let s="";for(let a=-c;a<o+c;++a){for(let n=-r;n<o+r;++n)s+=this.get(n,a)?t:e;s+=n}return s},toImageData(t,{on:e=[0,0,0],off:n=[0,0,0,0],padX:r=4,padY:c=4}={}){const s=o+2*r,a=o+2*c,f=t.createImageData(s,a),i=new Uint32Array(f.data.buffer);f.data.set([...e,255]);const l=i[0];f.data.set([...n,255]);const u=i[0];for(let o=0;o<a;++o)for(let t=0;t<s;++t)i[o*s+t]=this.get(t-r,o-c)?l:u;return f},toCanvas(o,t){const e=o.getContext("2d"),n=this.toImageData(e,t);o.width=n.width,o.height=n.height,e.putImageData(n,0,0)},toDataURL({type:o="image/png",scale:t=1,...e}={}){const n=document.createElement("canvas"),r=n.getContext("2d"),c=this.toImageData(r,e);return n.width=c.width*t,n.height=c.height*t,r.putImageData(c,0,0),r.imageSmoothingEnabled=!1,r.globalCompositeOperation="copy",r.drawImage(n,0,0,c.width,c.height,0,0,n.width,n.height),n.toDataURL(o,1)}}),M=[(o,t)=>!(1&(o^t)),(o,t)=>!(1&t),o=>!(o%3),(o,t)=>!((o+t)%3),(o,t)=>!(1&((o/3|0)^t>>1)),(o,t)=>!((o&t&1)+o*t%3),(o,t)=>!((o&t&1)+o*t%3&1),(o,t)=>!((1&(o^t))+o*t%3&1)],x=n(512);x[0]=1;for(let o=0,t=1;o<255;x[++o]=t)x[t+256]=o,t*=2,256&t&&(t^=285);const A=o=>x[o%255],K=o=>x[o+256],L=(o,t)=>{const e=n(o.length+t.length-1);for(let n=0;n<o.length;++n)for(let r=0;r<t.length;++r)e[n+r]^=A(o[n]+t[r]);return e.map(K)},y=(o,t)=>{const e=n(o.length+t.length-1);e.set(o,0);for(let n=0;n<o.length;++n)if(e[n]){const o=K(e[n]);for(let r=0;r<t.length;++r)e[n+r]^=A(t[r]+o)}return e.slice(o.length)},B=[[0],[0,0]];for(let o=1,t=B[1];o<30;++o){const e=L(t,[0,o]);B.push(e),t=e}const C=(o,t)=>{const e=[[],[]];let r=0,c=0;for(const[n,s]of t.l)for(let a=0;a<n;++a,r+=s){const n=o.slice(r,r+s);e[0].push(n),e[1].push(y(n,B[t.u])),c+=s+t.u}const s=n(c);let a=0;for(const o of e)for(let t,e=0;a!==t;++e){t=a;for(const t of o)e<t.length&&(s[a++]=t[e])}return s},S=(o,t,e)=>{let n=o<<e-1;for(let o=134217728;o;o>>>=1)n&o&&(n^=t*(o>>>e-1));return n},E=(o,t)=>{const e=(t,e,n,r,c)=>{for(;r-- >0;)for(let s=n;s-- >0;)o.C(t+s,e+r,c)},n=(o,t)=>{e(o-3,t-3,7,7,1),e(o-2,t-2,5,5,0),e(o-1,t-1,3,3,1)},r=(t,n)=>{e(t-2,n-2,5,5,1),e(t-1,n-1,3,3,0),o.C(t,n,1)},c=4*t+17;e(7,0,2,9,0),e(c-8,0,8,9,0);for(let t=0;t<c;++t)o.C(t,6,!(1&t));if(n(3,3),n(c-4,3),t>1){const o=1+(t/7|0),e=2*((c-13)/o/2+.75|0),n=[];for(let t=0;t<o;++t)n.push(c-7-t*e),t&&r(n[t],6);for(let t=0;t<o;++t)for(let e=0;e<o;++e)r(n[t],n[e])}if(t>6)for(let e=t<<12|S(t,7973,13),n=0;n<6;++n)for(let t=12;t-- >9;e>>>=1)o.C(c-t,n,1&e);for(let t=0;t<c;++t)for(let e=t;e<c;++e)o.A[e*c+t]=o.A[t*c+e];o.C(8,c-8,1)},D=o=>{const t=o.size,e=[];for(let n=t-2,r=t,c=-1;n>=0;n-=2){for(5===n&&(n=4);r+=c,-1!==r&&r!==t;)o.B(n+1,r)||e.push([n+1,r]),o.B(n,r)||e.push([n,r]);c*=-1}return e},H=(o,t,e)=>{t.forEach((([t,n],r)=>o.C(t,n,e[r>>3]<<(7&r)&128,0)))},Q=(o,t,e,n)=>{const r=o.size;for(let e=0;e<r;++e)for(let n=0;n<r;++n)t(n,e)&&!o.B(n,e)&&o.S(n,e);const c=n<<3|e;let s=21522^(c<<10|S(c,1335,11));for(let t=8;t-- >0;s>>=1)o.C(8,(t>1?7:8)-t,1&s),o.C(r-8+t,8,1&s);for(let t=7;t-- >0;s>>=1)o.C(t>5?7:t,8,1&s),o.C(8,r-t-1,1&s)},I=(o,t,e)=>{for(let n=0;n<o.size;++n)for(let r=0,c=t,s=t;r<o.size;++r)c=e(c,o.get(r,n)),s=e(s,o.get(n,r))},N=o=>((o,t=0)=>(I(o,[0],(([o,e],n)=>n!==e?[1,n]:(4===o?t+=3:o>4&&++t,[o+1,e]))),t))(o)+3*((o,t=0)=>{for(let e=1;e<o.size;++e)for(let n=1,r=o.get(e-1,0),c=o.get(e,0)===r;n<o.size;++n){const s=o.get(e-1,n),a=o.get(e,n)===s;t+=c&&a&&r===s,r=s,c=a}return t})(o)+40*((o,t=0)=>(I(o,0,((o,e)=>{const n=(o>>>1|2098176)&(3047517^e-1);return 2049&n&&++t,n})),t))(o)+10*((o,t=0)=>(I(o,0,((o,e)=>t+=e)),20*Math.abs(t/(o.size*o.size*2)-.5)|0))(o),Y=[],T=(o=r(1),{minCorrectionLevel:n=e.min,maxCorrectionLevel:c=e.max,minVersion:s=1,maxVersion:a=40,mask:f,...i}={})=>{c<n&&r(3),a<s&&r(2),"string"==typeof o&&(o=w(o,i));for(let e=s,r=0;e<=a;++e){if(t[n][e-1].t<r)continue;const s=b(2956);o(s,e),r=s.k;for(let o=c;o>=n;--o){const n=t[o][e-1];if(n.t<r)continue;for(s.push(0,4),s.k=s.k+7&-8;s.k<n.t;)s.push(60433,16);let c=Y[e];c||(Y[e]=c=k(4*e+17),E(c,e),c.p=D(c));const a=c.K();return H(a,c.p,C(s.U,n)),(M[f??-1]?[M[f]]:M).map(((o,t)=>{const e=a.K();return Q(e,o,f??t,n.o),e.s=N(e),e})).reduce(((o,t)=>t.s<o.s?t:o))}}r(4)};T.with=(...o)=>(t,e)=>T(t,{modes:[...U,...o],...e});const q="http://www.w3.org/2000/svg",V=/[^-a-zA-Z0-9 .,:/#%()]/g,j=(o,t,e,n=[],r=o.createElementNS(q,t))=>(Object.entries(e).forEach((([o,t])=>r.setAttribute(o,t))),r.replaceChildren(...n),r),F=(o,t,e=[])=>[`<${o}`,...Object.entries(t).map((([o,t])=>` ${o}="${`${t}`.replaceAll(V,"")}"`)),">",...e,`</${o}>`].join(""),J=o=>{const t=new Map,e=[],n=o=>{const e=t.get(o);return t.delete(o),e};for(let r=0;r<=o.size;++r)for(let c=0;c<=o.size;++c){const s=o.get(c,r),a=o.get(c,r-1),f=[o.get(c-1,r)!==s&&c+" "+(r+1),c+" "+r,a!==s&&c+1+" "+r].filter((o=>o));if(f.length>1){s||f.reverse();const o=f.pop(),r=n(f[0])||[],c=n(o);r.push(...f),r===c?e.push(r):(c?c.unshift(...r):t.set(o,r),t.set(r[0],c||r))}}return e.map((o=>`M${o.join("L")}Z`)).join("")},O=(o,{on:t="black",off:e,padX:n=4,padY:r=4,width:c,height:s,scale:a=1},f,i)=>{const l=o.size+2*n,u=o.size+2*r;return f("svg",{xmlns:q,version:"1.1",viewBox:`${-n} ${-r} ${l} ${u}`,width:c??l*a,height:s??u*a,"shape-rendering":"crispedges"},[e?f("rect",{x:-n,y:-r,width:l,height:u,fill:e}):"",f("path",{d:J(o),fill:t})],i)},X=(o,t)=>"data:image/svg+xml;base64,"+btoa(((o,t={})=>(t.xmlDeclaration?'<?xml version="1.0" encoding="UTF-8" ?>':"")+O(o,t,F))(o,{xmlDeclaration:1,...t})),z={1:"No data",2:"Bad version range",3:"Bad error correction range",4:"Too much data",5:"Data cannot be encoded using requested modes",6:"Bad framework",7:"Bad generate function",8:"Bad toSvgDataURL function"},R=o=>document.querySelector(`[name="${o}"]`),Z=o=>R(o).value;function G(o,t,e){const n=Number.parseInt(Z(o),10);return Number.isNaN(n)?t:Math.max(t,Math.min(e,Math.round(n)))}function W(o){const t=Number.parseInt(Z(o).slice(1),16);return[t>>16&255,t>>8&255,255&t,255]}function P(){const o=Z("mask");return"auto"===o?null:Number(o)}const oo=document.getElementById("error"),to=document.querySelector("#output canvas"),eo=document.querySelector("#output pre"),no=document.querySelector("#output svg"),ro=document.querySelector("#download .png"),co=document.querySelector("#download .svg");let so=null;function ao(){so=null,to.style.display="none",eo.style.display="none",no.style.display="none",oo.style.display="none",ro.removeAttribute("href"),co.removeAttribute("href");try{const o=T(Z("message"),{minVersion:G("min-version",1,40),maxVersion:G("max-version",1,40),minCorrectionLevel:e[Z("min-correction")],maxCorrectionLevel:e[Z("max-correction")],mask:P()});switch(so=o,ro.setAttribute("href","#"),co.setAttribute("href","#"),Z("format")){case"canvas":o.toCanvas(to,{on:W("on"),off:W("off")}),to.style.display="block";break;case"text":eo.innerText=o.toString({on:"\u2588\u2588",off:"  "}),eo.style.color=Z("on"),eo.style.background=Z("off"),eo.style.transform=`scale(${29/(o.size+8)})`,eo.style.display="inline-block";break;case"svg":((o,t,e={})=>{t.body?O(o,e,j.bind(0,t)):O(o,e,j.bind(0,t.ownerDocument),t)})(o,no,{on:Z("on"),off:Z("off")}),no.style.display="block"}}catch(t){oo.innerText="object"!=typeof(o=t)?`${o}`||"Unknown error":z[o.code]||o.message||"Unknown error",oo.style.display="block"}var o}ro.addEventListener("click",(o=>{if(!so)return void o.preventDefault();const t=so.toDataURL({type:"image/png",on:W("on"),off:W("off"),scale:10});ro.setAttribute("href",t)})),co.addEventListener("click",(o=>{if(!so)return void o.preventDefault();const t=X(so,{on:Z("on"),off:Z("off"),scale:10});co.setAttribute("href",t)})),document.querySelectorAll("input, select, textarea").forEach((o=>o.addEventListener("input",ao))),document.getElementById("reverse-col").addEventListener("click",(()=>{const o=R("on"),t=R("off"),e=o.value,n=t.value;o.value=n,t.value=e,ao()})),ao();
