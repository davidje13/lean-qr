"use strict";const t=(t,r)=>r.match(/.{4}/g).map((r=>{const e=r.charCodeAt(0)-35,o=r.charCodeAt(1)-35,n=92*r.charCodeAt(2)+r.charCodeAt(3)-3255,s=n>>5;return{i:t,c:8*(o*s+e*(s+1)),g:e?[[o,s],[e,s+1]]:[[o,s]],s:31&n}})),r=[t(1,"#$)b#$.y#$6>#$?'#$Hq#%:q#%>C#%E##%Ka%%:q#'?G%%C;#'HQ$&KA$(AQ$(EC($HS$(M)'&J[(&HS''K_*%Iw('MI')L%'+H1%-J{'+Mi-&L%**Ka-(KA&0KA#4KA$4KA)0KA*/MI1)MI'4Mi5'Mi'7L%)6LE"),t(0,"#$(a#$,w#$2Y#%.A#%27#',W#'-}%%0M%&/i$'29'$4e%)/i$+0-('13((1S&*2{$-3?',29.&2Y0&1U#41u#43?1'3_1)2{0+3_'63?&92{:&2{*82{-63_@%3?:-3?813?:13?=/3_E)3_1@3?C03?*K3_B53_"),t(3,"#$'`#$*u#%)-#%+]%%(I#')s'%()%')Q''(k%))s''*{)'*9'+*7(.(k*(+a%2)s2$*{$4*{'4*Y(2+a)4*{3*+a1.+a3.+a9*+a)?*{=++AB'+aH$+A<2+a$M+aF-+a6@+a*O+a1J+a-Q+a-T+a1S+a9N+aEE+a"),t(2,"#$&@#$(s#%'i#'&?%%')#'(S$''m%'(1'''K%)(S+&'K'*(3'/')(.'K*.'K0&(U4%(36%(33,'m-2(S)6(u#E'k13(U%A(u09(U'D(u?/(UB.(U=6(U<:(U?:(UF6(UQ.(U$^(uL9(Uc%(UQ;(UCM(Uf-(U`7(U")],e={min:0,L:0,M:1,Q:2,H:3,max:3},o=t=>"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:".indexOf(t),n=t=>t.charCodeAt(0),s=(...t)=>(r,e)=>t.forEach((t=>t(r,e))),i=t=>r=>{r.eci!==t&&(r.push(7,4),r.push(t,8),r.eci=t)},a=t=>(r,e)=>{r.push(4,4),r.push(t.length,8+8*(e>9)),t.forEach((t=>r.push(t,8)))},f=(t,r,e,o)=>{const n=o?r=>s(i(o),t(r)):t;return n.test=r,n.est=e,n.eci=o,n},c=f((t=>(r,e)=>{r.push(1,4),r.push(t.length,10+2*(e>26)+2*(e>9));let o=0;for(;o<t.length-2;o+=3)r.push(+t.slice(o,o+3),10);o<t.length-1?r.push(+t.slice(o,o+2),7):o<t.length&&r.push(+t[o],4)}),/./.test.bind(/[0-9]/),((t,r)=>14+2*(r>26)+2*(r>9)+10*t.length/3)),l=f((t=>(r,e)=>{r.push(2,4),r.push(t.length,9+2*(e>26)+2*(e>9));let n=0;for(;n<t.length-1;n+=2)r.push(45*o(t[n])+o(t[n+1]),11);n<t.length&&r.push(o(t[n]),6)}),(t=>o(t)>=0),((t,r)=>13+2*(r>26)+2*(r>9)+5.5*t.length)),u=f((t=>a([...t].map(n))),(t=>n(t)<128),((t,r)=>12+8*(r>9)+8*t.length)),h=f(u,(t=>n(t)<256),u.est,3),$=new TextEncoder,U=f((t=>a($.encode(t))),(()=>1),((t,r)=>12+8*(r>9)+8*$.encode(t).length),26),w=t=>t.reduce(((t,r)=>r.e<t.e?r:t)),m=[c,l,u,h,U],A={auto:(t,{modes:r=m}={})=>(e,o)=>{let n=[{e:0}];for(let e=0;e<t.length;++e)if(n=r.filter((r=>r.test(t[e]))).map((r=>w(n.map((n=>{const s=n.m===r?n.s:e,i=n.m===r?n.p:n,a=t.slice(s,e+1),f=r.eci??i.i;return{m:r,p:i,s:s,v:a,e:i.e+12*(f!==i.i)+Math.ceil(r.est(a,o)),i:f}}))))),!n.length)throw new Error("Unencodable");const s=[];for(let t=w(n);t.m;t=t.p)s.unshift(t.m(t.v));s.forEach((t=>t(e,o)))},multi:s,eci:i,numeric:c,alphaNumeric:l,bytes:a,ascii:u,iso8859_1:h,utf8:U};class d{constructor(t){this.t=new Uint8Array(t),this.o=0}push(t,r){for(let e=r,o=8-(7&this.o);e>0;e-=o,o=8)this.t[this.o>>>3]|=t<<o>>>e,this.o+=e<o?e:o}}const K=t=>Array.isArray(t)?[...t,255]:[255&t,t>>>8&255,t>>>16&255,t>>>24];class p{constructor({size:t,d:r}){this.size=t,this.d=new Uint8Array(r||t*t)}get=(t,r)=>t>=0&&t<this.size&&!!(1&this.d[r*this.size+t]);l=(t,r)=>2&this.d[r*this.size+t];u(t,r,e,o=1){this.d[r*this.size+t]=2*o|!!e}h(t,r){this.d[r*this.size+t]^=1}toString({on:t="##",off:r="  ",lf:e="\n",padX:o=4,padY:n=4}={}){let s="";for(let i=-n;i<this.size+n;++i){for(let e=-o;e<this.size+o;++e)s+=this.get(e,i)?t:r;s+=e}return s}toImageData(t,{on:r=4278190080,off:e=0,padX:o=4,padY:n=4}={}){const s=this.size+2*o,i=this.size+2*n,a=t.createImageData(s,i),f=new Uint32Array(a.data.buffer);a.data.set(K(r));const c=f[0];a.data.set(K(e));const l=f[0];for(let t=0;t<i;++t)for(let r=0;r<s;++r)f[t*s+r]=this.get(r-o,t-n)?c:l;return a}toCanvas(t,r){const e=t.getContext("2d"),o=this.toImageData(e,r);t.width=o.width,t.height=o.height,e.putImageData(o,0,0)}toDataURL({type:t="image/png",scale:r=1,...e}={}){const o=document.createElement("canvas"),n=o.getContext("2d"),s=this.toImageData(n,e);return o.width=s.width*r,o.height=s.height*r,n.putImageData(s,0,0),n.imageSmoothingEnabled=!1,n.globalCompositeOperation="copy",n.drawImage(o,0,0,s.width,s.height,0,0,o.width,o.height),o.toDataURL(t,1)}}const M=[(t,r)=>!(1&(t^r)),(t,r)=>!(1&r),t=>!(t%3),(t,r)=>!((t+r)%3),(t,r)=>!(1&((t/3|0)^r>>1)),(t,r)=>!((t&r&1)+t*r%3),(t,r)=>!((t&r&1)+t*r%3&1),(t,r)=>!((1&(t^r))+t*r%3&1)],y=new Uint8Array(512);y[0]=1;for(let t=0,r=1;t<255;y[++t]=r)y[r+256]=t,r*=2,256&r&&(r^=285);const E=t=>y[t%255],_=t=>y[t+256],g=(t,r)=>{const e=new Uint8Array(t.length+r.length-1);for(let o=0;o<t.length;++o)for(let n=0;n<r.length;++n)e[o+n]^=E(t[o]+r[n]);return e.map(_)},L=(t,r)=>{const e=new Uint8Array(t.length+r.length-1);e.set(t,0);for(let o=0;o<t.length;++o)if(e[o]){const t=_(e[o]);for(let n=0;n<r.length;++n)e[o+n]^=E(r[n]+t)}return e.slice(t.length)},C=[[0],[0,0]];for(let t=1,r=C[1];t<30;++t){const e=g(r,[0,t]);C.push(e),r=e}const S=(t,r)=>{const e=[[],[]];let o=0,n=0;for(const[s,i]of r.g)for(let a=0;a<s;++a,o+=i){const s=t.slice(o,o+i);e[0].push(s),e[1].push(L(s,C[r.s])),n+=i+r.s}const s=new Uint8Array(n);let i=0;for(const t of e)for(let r,e=0;i!==r;++e){r=i;for(const r of t)e<r.length&&(s[i++]=r[e])}return s},H=(t,r,e)=>{let o=t<<e-1;for(let t=134217728;t;t>>>=1)o&t&&(o^=r*(t>>>e-1));return o},Q=(t,r,e,o,n,s)=>{for(let i=e;i<n;++i)for(let e=r;e<o;++e)t.u(e,i,s)},v=(t,r,e)=>{Q(t,r-3,e-3,r+4,e+4,1),Q(t,r-2,e-2,r+3,e+3,0),Q(t,r-1,e-1,r+2,e+2,1)},x=(t,r,e)=>{Q(t,r-2,e-2,r+3,e+3,1),Q(t,r-1,e-1,r+2,e+2,0),t.u(r,e,1)},I=(t,r)=>{const e=4*r+17;v(t,3,3),v(t,e-4,3),v(t,3,e-4),Q(t,0,7,9,9,0),Q(t,7,0,9,7,0),Q(t,e-8,7,e,9,0),Q(t,e-8,0,e-7,7,0),Q(t,7,e-8,9,e,0),Q(t,0,e-8,7,e-7,0),t.u(8,e-8,1);for(let r=8;r<e-8;++r)t.u(r,6,!(1&r)),t.u(6,r,!(1&r));if(r>=2){const o=1+(r/7|0),n=2*((e-13)/o/2+.75|0),s=[6];for(let t=o;t-- >0;)s.push(e-7-t*n);for(let r=0;r<=o;++r)for(let e=0;e<=o;++e)!r&&!e||!r&&e===o||r===o&&!e||x(t,s[r],s[e])}if(r>=7)for(let o=r<<12|H(r,7973,13),n=0;n<6;++n)for(let r=12;r-- >9;o>>>=1)t.u(n,e-r,1&o),t.u(e-r,n,1&o)},B=t=>{const r=t.size,e=[];for(let o=r-2,n=r,s=-1;o>=0;o-=2){for(5===o&&(o=4);n+=s,-1!==n&&n!==r;)t.l(o+1,n)||e.push([o+1,n]),t.l(o,n)||e.push([o,n]);s*=-1}return e},Y=(t,r,e)=>{r.forEach((([r,o],n)=>t.u(r,o,e[n>>3]<<(7&n)&128,0)))},k=(t,r,e,o)=>{const n=t.size;for(let e=0;e<n;++e)for(let o=0;o<n;++o)r(o,e)&&!t.l(o,e)&&t.h(o,e);const s=o<<3|e;let i=21522^(s<<10|H(s,1335,11));for(let r=8;r-- >0;i>>=1)t.u(8,(r>1?7:8)-r,1&i),t.u(n-8+r,8,1&i);for(let r=7;r-- >0;i>>=1)t.u(r>5?7:r,8,1&i),t.u(8,n-r-1,1&i)},D=(t,r,e)=>{for(let o=0;o<t.size;++o){let n=r,s=r;for(let r=0;r<t.size;++r)n=e(n,t.get(r,o)),s=e(s,t.get(o,r))}},J=t=>(t=>{let r=0;return D(t,[0],(([t,e],o)=>o!==e?[1,o]:(4===t?r+=3:t>4&&++r,[t+1,e]))),r})(t)+3*(t=>{let r=0;for(let e=1;e<t.size;++e){let o=t.get(e-1,0),n=t.get(e,0)===o;for(let s=1;s<t.size;++s){const i=t.get(e-1,s),a=t.get(e,s)===i;r+=n&&a&&o===i,o=i,n=a}}return r})(t)+40*(t=>{let r=0;return D(t,0,((t,e)=>{const o=(t>>>1|2098176)&(3047517^e-1);return 2049&o&&++r,o})),r})(t)+(t=>{let r=0;for(let e=0;e<t.size;++e)for(let o=0;o<t.size;++o)r+=t.get(o,e);return 10*(20*Math.abs(r/(t.size*t.size)-.5)|0)})(t),T=[],b=(t,{minCorrectionLevel:o=e.min,maxCorrectionLevel:n=e.max,minVersion:s=1,maxVersion:i=40,mask:a,...f}={})=>{if(n<o)throw new Error("Bad correction range");if(i<s)throw new Error("Bad version range");"string"==typeof t&&(t=A.auto(t,f));for(let e=s,f=0;e<=i;++e){if(r[o][e-1].c<f)continue;const s=new d(2956);t(s,e),f=s.o;for(let t=n;t>=o;--t){const o=r[t][e-1];if(o.c<f)continue;for(s.push(0,4),s.o=s.o+7&-8;s.o<o.c;)s.push(60433,16);let n=T[e];n||(T[e]=n=new p({size:4*e+17}),I(n,e),n.p=B(n));const i=new p(n);return Y(i,n.p,S(s.t,o)),(M[a??-1]?[M[a]]:M).map(((t,r)=>{const e=new p(i);return k(e,t,a??r,o.i),e.s=J(e),e})).reduce(((t,r)=>r.s<t.s?r:t))}}throw new Error("Too much data")};b.with=(...t)=>(r,e)=>b(r,{modes:[...m,...t],...e}),exports.correction=e,exports.generate=b,exports.mode=A;
