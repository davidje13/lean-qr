!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["lean-qr"]={})}(this,(function(t){"use strict";const e=t=>{const e=t>>18,r=t>>12&63,s=t>>5&127;return{capBits:8*(r*s+e*(s+1)),groups:e?[[r,s],[e,s+1]]:[[r,s]],ecsize:31&t}},r=[{id:1,v:[4711,5194,5871,6676,7578,10386,10708,11320,11934,534674,18996,535448,19834,278142,285430,285784,1318268,286494,1064508,1326460,1068700,1846780,1331006,1076926,1084762,568924,1085278,2637502,1867422,2645630,843390,73342,335486,1629822,1888062,3698494,1122142,4738910,1134270,1654494].map(e)},{id:0,v:[4618,5008,5530,9234,9592,17264,17394,533718,537750,279930,1054302,550038,296118,1328408,1332536,816572,304604,1086842,2897306,3421498,71002,71132,3687932,3696060,3442172,1127900,878012,6043068,1922492,2700796,7611868,6071772,5563868,6088156,6866428,8939004,3790300,8443356,2000380,8201724].map(e)},{id:3,v:[4525,4822,8754,8986,532978,17016,1057234,541270,1065492,549496,1065692,1589914,1082008,1356308,1856286,586360,3936988,332508,1118906,1372958,1643228,4223774,3715870,4240158,5796638,1688284,6849278,8143646,9704190,6615838,434974,9216798,5100318,2016030,3830558,2810654,2822942,3867422,5944094,9052958].map(e)},{id:2,v:[4401,4636,8630,16688,532854,16892,278970,541146,1065368,549372,2109848,1077724,1098102,1356184,1880472,3420670,4465116,4989404,4231610,2683388,1651230,139704,3736062,647710,3498494,1184286,7389694,8172030,6894078,6648318,7434750,9253374,12104190,504350,10838526,16785918,12157438,8561150,17605118,16073214].map(e)}],s={min:0,L:0,M:1,Q:2,H:3,max:3},n=t=>"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:".indexOf(t),o=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return(t,r)=>e.forEach((e=>e(t,r)))},i=t=>(e,r)=>{e.push(1,4),e.push(t.length,r<10?10:r<27?12:14);let s=0;for(;s<t.length-2;s+=3)e.push(Number(t.substr(s,3)),10);s<t.length-1?e.push(Number(t.substr(s,2)),7):s<t.length&&e.push(Number(t.substr(s,1)),4)},l=t=>(e,r)=>{e.push(2,4),e.push(t.length,r<10?9:r<27?11:13);let s=0;for(;s<t.length-1;s+=2)e.push(45*n(t[s])+n(t[s+1]),11);s<t.length&&e.push(n(t[s]),6)},h=t=>(e,r)=>{e.push(4,4),e.push(t.length,r<10?8:16),t.forEach((t=>e.push(t,8)))},a=t=>e=>{e.push(7,4),e.push(t,8)},f=t=>h([...t].map((t=>t.codePointAt(0)))),u=t=>o(a(26),h((new TextEncoder).encode(t))),c=t=>t.reduce(((t,e)=>e.e<t.e?e:t));i.reg=/[0-9]/,i.est=(t,e)=>4+(e<10?10:e<27?12:14)+10*t.length/3,l.reg=/[0-9A-Z $%*+./:-]/,l.est=(t,e)=>4+(e<10?9:e<27?11:13)+5.5*t.length,f.reg=/[\u0000-\u00FF]/,f.est=(t,e)=>4+(e<10?8:16)+8*t.length;var p={auto:function(t){let{modes:e=[i,l,f,u]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=new Set(e),s=r.delete(u);return s&&(e=[...r]),(r,n)=>{let o=[{c:0,e:0}];for(let i=0;i<t.length;++i)if(o=e.filter((e=>e.reg.test(t[i]))).map((e=>c(o.map((r=>{const s={c:e,p:r.c===e?r.p:r,s:r.c===e?r.s:i};return s.v=t.substring(s.s,i+1),s.e=s.p.e+Math.ceil(e.est(s.v,n)),s}))))),!o.length){if(s)return void u(t)(r,n);throw new Error("Unencodable")}const i=[];for(let t=c(o);t.c;t=t.p)i.unshift(t.c(t.v));i.forEach((t=>t(r,n)))}},multi:o,eci:a,numeric:i,alphaNumeric:l,bytes:h,iso8859_1:f,utf8:u};class g{constructor(t){this.bytes=new Uint8Array(t),this.bits=0}push(t,e){for(let r=e,s=8-(7&this.bits);r>0;r-=s,s=8)this.bytes[this.bits>>>3]|=t<<s>>>r,this.bits+=Math.min(r,s)}}function d(t){Array.isArray(t)||(t=[255&t,t>>>8&255,t>>>16&255,t>>>24]);const e=new Uint8Array([...t,255]);return new Uint32Array(e.buffer,0,1)[0]}class m{constructor(t){let{size:e,d:r}=t;this.size=e,this.d=new Uint8Array(r||e*e)}get(t,e){return!!(1&this.d[e*this.size+t])}masked(t,e){return 2&this.d[e*this.size+t]}set(t,e,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.d[e*this.size+t]=2*s|!!r}inv(t,e){this.d[e*this.size+t]^=1}toString(){let{on:t="##",off:e="  ",lf:r="\n",padX:s=4,padY:n=4}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=(e.repeat(this.size+2*s)+r).repeat(n),i=e.repeat(s);let l=o;for(let s=0;s<this.size;++s){l+=i;for(let r=0;r<this.size;++r)l+=this.get(r,s)?t:e;l+=i+r}return l+o}toImageData(t){let{on:e=4278190080,off:r=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=t.createImageData(this.size,this.size),n=new Uint32Array(s.data.buffer),o=d(e),i=d(r);n.fill(i);for(let t=0;t<this.size*this.size;++t)n[t]=1&this.d[t]?o:i;return s}toCanvas(t){let{padX:e=4,padY:r=4,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.width=this.size+2*e,t.height=this.size+2*r;const n=t.getContext("2d"),o=this.toImageData(n,s);n.putImageData(o,e,r)}}var v=[(t,e)=>!(1&(t^e)),(t,e)=>!(1&e),t=>!(t%3),(t,e)=>!((t+e)%3),(t,e)=>!(1&(Math.floor(t/3)^Math.floor(e/2))),(t,e)=>!((t&e&1)+t*e%3),(t,e)=>!((t&e&1)+t*e%3&1),(t,e)=>!((1&(t^e))+t*e%3&1)];const z=new Uint8Array(512);z[0]=1;for(let t=0,e=1;t<255;z[++t]=e)z[e+256]=t,e*=2,256&e&&(e^=285);const b=t=>z[t%255],w=t=>z[t+256],y=(t,e)=>{const r=new Uint8Array(t.length+e.length-1);for(let s=0;s<t.length;++s)for(let n=0;n<e.length;++n)r[s+n]^=b(t[s]+e[n]);return r.map(w)},A=(t,e)=>{const r=new Uint8Array(t.length+e.length-1);r.set(t,0);for(let s=0;s<t.length;++s)if(r[s]){const t=w(r[s]);for(let n=0;n<e.length;++n)r[s+n]^=b(e[n]+t)}return r.slice(t.length)},E=[[0],[0,0]];for(let t=1,e=E[1];t<30;++t){const r=y(e,[0,t]);E.push(r),e=r}const M=(t,e,r)=>{let s=e;const n=Math.max(...r.map((t=>t.length)));for(let e=0;e<n;++e)r.forEach((r=>{e<r.length&&(t[s++]=r[e])}));return s};var x=(t,e)=>{let{groups:r,ecsize:s}=e;const n=[],o=[];let i=0,l=0;r.forEach((e=>{let[r,h]=e;for(let e=0;e<r;++e,i+=h){const e=t.slice(i,i+h);n.push(e),o.push(A(e,E[s]))}l+=r*(h+s)}));const h=new Uint8Array(l),a=M(h,0,n);return M(h,a,o),h};const U=(t,e,r)=>{let s=t<<r-1;for(let t=134217728;t;t>>>=1)s&t&&(s^=e*(t>>>r-1));return s},I=(t,e,r,s,n,o)=>{for(let i=r;i<n;++i)for(let r=e;r<s;++r)t.set(r,i,o)},k=(t,e,r)=>{I(t,e-3,r-3,e+4,r+4,1),I(t,e-2,r-2,e+3,r+3,0),I(t,e-1,r-1,e+2,r+2,1)},B=(t,e,r)=>{I(t,e-2,r-2,e+3,r+3,1),I(t,e-1,r-1,e+2,r+2,0),t.set(e,r,1)},C=t=>{const e=t.size,r=[];for(let s=e-2,n=e,o=-1;s>=0;s-=2){for(5===s&&(s=4);n+=o,-1!==n&&n!==e;)t.masked(s+1,n)||r.push([s+1,n]),t.masked(s,n)||r.push([s,n]);o*=-1}return r},D=(t,e,r)=>{e.forEach(((e,s)=>{let[n,o]=e;return t.set(n,o,r[s>>3]<<(7&s)&128,0)}))},N=(t,e,r,s)=>{const n=t.size;for(let r=0;r<n;++r)for(let s=0;s<n;++s)e(s,r)&&!t.masked(s,r)&&t.inv(s,r);const o=s<<3|r;let i=21522^(o<<10|U(o,1335,11));for(let e=8;e-- >0;i>>=1)t.set(8,(e>1?7:8)-e,1&i),t.set(n-8+e,8,1&i);for(let e=7;e-- >0;i>>=1)t.set(e>5?7:e,8,1&i),t.set(8,n-e-1,1&i)},T=(t,e,r)=>{for(let s=0;s<t.size;++s){let n=e,o=e;for(let e=0;e<t.size;++e)n=r(n,t.get(e,s)),o=r(o,t.get(s,e))}};var L=t=>(t=>{let e=0;return T(t,[0],((t,r)=>{let[s,n]=t;return r!==n?[1,r]:(4===s?e+=3:s>4&&++e,[s+1,n])})),e})(t)+3*(t=>{let e=0;for(let r=1;r<t.size;++r){let s=t.get(r-1,0),n=t.get(r,0)===s;for(let o=1;o<t.size;++o){const i=t.get(r-1,o),l=t.get(r,o)===i;e+=n&&l&&s===i,s=i,n=l}}return e})(t)+40*(t=>{let e=0;return T(t,0,((t,r)=>{const s=(t>>>1|2098176)&(3047517^(r?0:-1));return 2049&s&&++e,s})),e})(t)+(t=>{let e=0;for(let r=0;r<t.size;++r)for(let s=0;s<t.size;++s)e+=t.get(s,r);return 10*Math.floor(20*Math.abs(e/(t.size*t.size)-.5))})(t);const F=[],O=t=>{let e=F[t];if(!e){const r=new m({size:4*t+17});((t,e)=>{const r=4*e+17;k(t,3,3),k(t,r-4,3),k(t,3,r-4),I(t,0,7,9,9,0),I(t,7,0,9,7,0),I(t,r-8,7,r,9,0),I(t,r-8,0,r-7,7,0),I(t,7,r-8,9,r,0),I(t,0,r-8,7,r-7,0),t.set(8,r-8,1);for(let e=8;e<r-8;++e)t.set(e,6,!(1&e)),t.set(6,e,!(1&e));if(e>=2){const s=Math.floor(e/7)+1,n=2*Math.ceil((r-13)/s/2-.25),o=[6];for(let t=s;t-- >0;)o.push(r-7-t*n);for(let e=0;e<=s;++e)for(let r=0;r<=s;++r)!e&&!r||!e&&r===s||e===s&&!r||B(t,o[e],o[r])}if(e>=7)for(let s=e<<12|U(e,7973,13),n=0;n<6;++n)for(let e=12;e-- >9;s>>>=1)t.set(n,r-e,1&s),t.set(r-e,n,1&s)})(r,t),F[t]=e=[r,C(r)]}return[new m(e[0]),e[1]]};t.correction=s,t.generate=function(t){let{minCorrectionLevel:e=s.min,maxCorrectionLevel:n=s.max,minVersion:o=1,maxVersion:i=40,mask:l=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n<e)throw new Error("Invalid correction level range");if(i<o)throw new Error("Invalid version range");"string"==typeof t&&(t=p.auto(t));let h=0;for(let s=o;s<=i;++s){if(r[e].v[s-1].capBits<h)continue;const o=new g(2956);t(o,s),h=o.bits;for(let t=n;t>=e;--t){const e=r[t],n=e.v[s-1];if(n.capBits<h)continue;for(o.push(0,4),o.bits=o.bits+7&-8;o.bits<n.capBits;)o.push(60433,16);const[i,a]=O(s);return D(i,a,x(o.bytes,n)),null!==l?(N(i,v[l],l,e.id),i):v.map(((t,r)=>{const s=new m(i);return N(s,t,r,e.id),s.s=L(s),s})).reduce(((t,e)=>e.s<t.s?e:t))}}throw new Error("Too much data")},t.mode=p,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.js.map
