!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("lean-qr",[],e):"object"==typeof exports?exports["lean-qr"]=e():t["lean-qr"]=e()}(global,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";r.r(e),r.d(e,"correction",(function(){return o})),r.d(e,"mode",(function(){return g})),r.d(e,"generate",(function(){return T}));const n=t=>{const e=t>>18,r=t>>12&63,n=t>>5&127;return{capBits:8*(r*n+e*(n+1)),groups:e?[[r,n],[e,n+1]]:[[r,n]],ecsize:31&t}},s=[{id:1,v:[4711,5194,5871,6676,7578,10386,10708,11320,11934,534674,18996,535448,19834,278142,285430,285784,1318268,286494,1064508,1326460,1068700,1846780,1331006,1076926,1084762,568924,1085278,2637502,1867422,2645630,843390,73342,335486,1629822,1888062,3698494,1122142,4738910,1134270,1654494].map(n)},{id:0,v:[4618,5008,5530,9234,9592,17264,17394,533718,537750,279930,1054302,550038,296118,1328408,1332536,816572,304604,1086842,2897306,3421498,71002,71132,3687932,3696060,3442172,1127900,878012,6043068,1922492,2700796,7611868,6071772,5563868,6088156,6866428,8939004,3790300,8443356,2000380,8201724].map(n)},{id:3,v:[4525,4822,8754,8986,532978,17016,1057234,541270,1065492,549496,1065692,1589914,1082008,1356308,1856286,586360,3936988,332508,1118906,1372958,1643228,4223774,3715870,4240158,5796638,1688284,6849278,8143646,9704190,6615838,434974,9216798,5100318,2016030,3830558,2810654,2822942,3867422,5944094,9052958].map(n)},{id:2,v:[4401,4636,8630,16688,532854,16892,278970,541146,1065368,549372,2109848,1077724,1098102,1356184,1880472,3420670,4465116,4989404,4231610,2683388,1651230,139704,3736062,647710,3498494,1184286,7389694,8172030,6894078,6648318,7434750,9253374,12104190,504350,10838526,16785918,12157438,8561150,17605118,16073214].map(n)}],o={min:0,L:0,M:1,Q:2,H:3,max:3},i=t=>"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:".indexOf(t),l=(...t)=>(e,r)=>t.forEach(t=>t(e,r)),u=t=>(e,r)=>{e.push(1,4),e.push(t.length,r<10?10:r<27?12:14);let n=0;for(;n<t.length-2;n+=3)e.push(Number(t.substr(n,3)),10);n<t.length-1?e.push(Number(t.substr(n,2)),7):n<t.length&&e.push(Number(t.substr(n,1)),4)},a=t=>(e,r)=>{e.push(2,4),e.push(t.length,r<10?9:r<27?11:13);let n=0;for(;n<t.length-1;n+=2)e.push(45*i(t[n])+i(t[n+1]),11);n<t.length&&e.push(i(t[n]),6)},f=t=>(e,r)=>{e.push(4,4),e.push(t.length,r<10?8:16),t.forEach(t=>e.push(t,8))},c=t=>e=>{e.push(7,4),e.push(t,8)},h=t=>f([...t].map(t=>t.codePointAt(0))),p=t=>l(c(26),f((new TextEncoder).encode(t))),d=t=>t.reduce((t,e)=>e.e<t.e?e:t);u.reg=/[0-9]/,u.est=(t,e)=>4+(e<10?10:e<27?12:14)+10*t.length/3,a.reg=/[0-9A-Z $%*+./:-]/,a.est=(t,e)=>4+(e<10?9:e<27?11:13)+5.5*t.length,h.reg=/[\u0000-\u00FF]/,h.est=(t,e)=>4+(e<10?8:16)+8*t.length;var g={auto:(t,{modes:e=[u,a,h,p]}={})=>{const r=new Set(e),n=r.delete(p);return n&&(e=[...r]),(r,s)=>{let o=[{c:0,e:0}];for(let i=0;i<t.length;++i)if(o=e.filter(e=>e.reg.test(t[i])).map(e=>d(o.map(r=>{const n={c:e,p:r.c===e?r.p:r,s:r.c===e?r.s:i};return n.v=t.substring(n.s,i+1),n.e=n.p.e+Math.ceil(e.est(n.v,s)),n}))),!o.length){if(n)return void p(t)(r,s);throw new Error("Unencodable")}const i=[];for(let t=d(o);t.c;t=t.p)i.unshift(t.c(t.v));i.forEach(t=>t(r,s))}},multi:l,eci:c,numeric:u,alphaNumeric:a,bytes:f,iso8859_1:h,utf8:p};class m{constructor(t){this.bytes=new Uint8Array(t),this.bits=0}push(t,e){for(let r=e,n=8-(7&this.bits);r>0;r-=n,n=8)this.bytes[this.bits>>>3]|=t<<n>>>r,this.bits+=Math.min(r,n)}}class b{constructor({size:t,d:e}){this.size=t,this.d=new Uint8Array(e||t*t)}get(t,e){return!!(1&this.d[e*this.size+t])}masked(t,e){return 2&this.d[e*this.size+t]}set(t,e,r,n=1){this.d[e*this.size+t]=2*n|!!r}inv(t,e){this.d[e*this.size+t]^=1}toString({on:t="##",off:e="  ",lf:r="\n",padX:n=4,padY:s=4}={}){const o=(e.repeat(this.size+2*n)+r).repeat(s),i=e.repeat(n);let l=o;for(let n=0;n<this.size;++n){l+=i;for(let r=0;r<this.size;++r)l+=this.get(r,n)?t:e;l+=i+r}return l+o}toImageData(t,{on:e=4278190080,off:r=0}={}){const n=t.createImageData(this.size,this.size),s=new Uint32Array(n.data.buffer);s.fill(r);for(let t=0;t<this.size*this.size;++t)s[t]=1&this.d[t]?e:r;return n}toCanvas(t,{padX:e=4,padY:r=4,...n}={}){t.width=this.size+2*e,t.height=this.size+2*r;const s=t.getContext("2d"),o=this.toImageData(s,n);s.putImageData(o,e,r)}}var v=[(t,e)=>!(1&(t^e)),(t,e)=>!(1&e),t=>!(t%3),(t,e)=>!((t+e)%3),(t,e)=>!(1&(Math.floor(t/3)^Math.floor(e/2))),(t,e)=>!((t&e&1)+t*e%3),(t,e)=>!((t&e&1)+t*e%3&1),(t,e)=>!((1&(t^e))+t*e%3&1)];const z=new Uint8Array(512);z[0]=1;for(let t=0,e=1;t<255;z[++t]=e)z[e+256]=t,e*=2,256&e&&(e^=285);const y=t=>z[t%255],w=t=>z[t+256],x=(t,e)=>{const r=new Uint8Array(t.length+e.length-1);for(let n=0;n<t.length;++n)for(let s=0;s<e.length;++s)r[n+s]^=y(t[n]+e[s]);return r.map(w)},M=(t,e)=>{const r=new Uint8Array(t.length+e.length-1);r.set(t,0);for(let n=0;n<t.length;++n)if(r[n]){const t=w(r[n]);for(let s=0;s<e.length;++s)r[n+s]^=y(e[s]+t)}return r.slice(t.length)},E=[[0],[0,0]];for(let t=1,e=E[1];t<30;++t){const r=x(e,[0,t]);E.push(r),e=r}const j=(t,e,r)=>{let n=e;const s=Math.max(...r.map(t=>t.length));for(let e=0;e<s;++e)r.forEach(r=>{e<r.length&&(t[n++]=r[e])});return n};var A=(t,{groups:e,ecsize:r})=>{const n=[],s=[];let o=0,i=0;e.forEach(([e,l])=>{for(let i=0;i<e;++i,o+=l){const e=t.slice(o,o+l);n.push(e),s.push(M(e,E[r]))}i+=e*(l+r)});const l=new Uint8Array(i),u=j(l,0,n);return j(l,u,s),l};const O=(t,e,r)=>{let n=t<<r-1;for(let t=1073741824;t;t>>>=1)n&t&&(n^=e*(t>>>r-1));return n},U=(t,e,r,n,s,o)=>{for(let i=r;i<s;++i)for(let r=e;r<n;++r)t.set(r,i,o)},S=(t,e,r)=>{U(t,e-3,r-3,e+4,r+4,1),U(t,e-2,r-2,e+3,r+3,0),U(t,e-1,r-1,e+2,r+2,1)},I=(t,e,r)=>{U(t,e-2,r-2,e+3,r+3,1),U(t,e-1,r-1,e+2,r+2,0),t.set(e,r,1)},P=t=>{const e=t.size,r=[];for(let n=e-2,s=e,o=-1;n>=0;n-=2){for(5===n&&(n=4);s+=o,-1!==s&&s!==e;)t.masked(n+1,s)||r.push([n+1,s]),t.masked(n,s)||r.push([n,s]);o*=-1}return r},_=(t,e,r)=>{e.forEach(([e,n],s)=>t.set(e,n,r[s>>3]<<(7&s)&128,0))},k=(t,e,r,n)=>{for(let r=0;r<t.size;++r)for(let n=0;n<t.size;++n)e(n,r)&&!t.masked(n,r)&&t.inv(n,r);const s=n<<3|r;let o=21522^(s<<10|O(s,1335,11));for(let e=8;e-- >0;o>>=1)t.set(8,(e>1?7:8)-e,1&o),t.set(t.size-8+e,8,1&o);for(let e=7;e-- >0;o>>=1)t.set(e>5?7:e,8,1&o),t.set(8,t.size-e-1,1&o)},B=(t,e,r)=>{for(let n=0;n<t.size;++n){let s=e,o=e;for(let e=0;e<t.size;++e)s=r(s,t.get(e,n)),o=r(o,t.get(n,e))}};var C=t=>(t=>{let e=0;return B(t,[0],([t,r],n)=>n!==r?[1,n]:(4===t?e+=3:t>4&&++e,[t+1,r])),e})(t)+3*(t=>{let e=0;for(let r=1;r<t.size;++r){let n=t.get(r-1,0),s=t.get(r,0)===n;for(let o=1;o<t.size;++o){const i=t.get(r-1,o),l=t.get(r,o)===i;e+=s&&l&&n===i,n=i,s=l}}return e})(t)+40*(t=>{let e=0;return B(t,0,(t,r)=>{const n=(t>>>1|2098176)&(3047517^(r?0:-1));return 2049&n&&++e,n}),e})(t)+(t=>{let e=0;for(let r=0;r<t.size;++r)for(let n=0;n<t.size;++n)e+=t.get(n,r);return 10*Math.floor(20*Math.abs(e/(t.size*t.size)-.5))})(t);const D=[],N=t=>{let e=D[t];if(!e){const r=new b({size:4*t+17});((t,e)=>{const r=4*e+17;S(t,3,3),S(t,r-4,3),S(t,3,r-4),U(t,0,7,9,9,0),U(t,7,0,9,7,0),U(t,r-8,7,r,9,0),U(t,r-8,0,r-7,7,0),U(t,7,r-8,9,r,0),U(t,0,r-8,7,r-7,0),t.set(8,r-8,1);for(let e=8;e<r-8;++e)t.set(e,6,!(1&e)),t.set(6,e,!(1&e));if(e>=2){const n=Math.floor(e/7)+1,s=2*Math.ceil((r-13)/n/2-.25),o=[6];for(let t=n;t-- >0;)o.push(r-7-t*s);for(let e=0;e<=n;++e)for(let r=0;r<=n;++r)!e&&!r||!e&&r===n||e===n&&!r||I(t,o[e],o[r])}if(e>=7)for(let n=e<<12|O(e,7973,13),s=0;s<6;++s)for(let e=12;e-- >9;n>>>=1)t.set(s,r-e,1&n),t.set(r-e,s,1&n)})(r,t),D[t]=e=[r,P(r)]}return[new b(e[0]),e[1]]};var T=(t,{minCorrectionLevel:e=o.min,maxCorrectionLevel:r=o.max,minVersion:n=1,maxVersion:i=40,mask:l=null}={})=>{if(r<e)throw new Error("Invalid correction level range");if(i<n)throw new Error("Invalid version range");"string"==typeof t&&(t=g.auto(t));let u=0;for(let o=n;o<=i;++o){if(s[e].v[o-1].capBits<u)continue;const n=new m(2956);t(n,o),u=n.bits;for(let t=r;t>=e;--t){const e=s[t],r=e.v[o-1];if(r.capBits<u)continue;for(n.push(0,4),n.bits=n.bits+7&-8;n.bits<r.capBits;)n.push(60433,16);const[i,a]=N(o);return _(i,a,A(n.bytes,r)),null!==l?(k(i,v[l],l,e.id),i):v.map((t,r)=>{const n=new b(i);return k(n,t,r,e.id),n.s=C(n),n}).reduce((t,e)=>e.s<t.s?e:t)}}throw new Error("Too much data")}}])}));
//# sourceMappingURL=index.js.map