"use strict";const t=(t,e)=>e.match(/.{4}/g).map((e=>{const s=e.charCodeAt(0)-35,r=e.charCodeAt(1)-35,o=92*e.charCodeAt(2)+e.charCodeAt(3)-3255,n=o>>5;return{i:t,c:8*(r*n+s*(n+1)),g:s?[[r,n],[s,n+1]]:[[r,n]],s:31&o}})),e=[t(1,"#$)b#$.y#$6>#$?'#$Hq#%:q#%>C#%E##%Ka%%:q#'?G%%C;#'HQ$&KA$(AQ$(EC($HS$(M)'&J[(&HS''K_*%Iw('MI')L%'+H1%-J{'+Mi-&L%**Ka-(KA&0KA#4KA$4KA)0KA*/MI1)MI'4Mi5'Mi'7L%)6LE"),t(0,"#$(a#$,w#$2Y#%.A#%27#',W#'-}%%0M%&/i$'29'$4e%)/i$+0-('13((1S&*2{$-3?',29.&2Y0&1U#41u#43?1'3_1)2{0+3_'63?&92{:&2{*82{-63_@%3?:-3?813?:13?=/3_E)3_1@3?C03?*K3_B53_"),t(3,"#$'`#$*u#%)-#%+]%%(I#')s'%()%')Q''(k%))s''*{)'*9'+*7(.(k*(+a%2)s2$*{$4*{'4*Y(2+a)4*{3*+a1.+a3.+a9*+a)?*{=++AB'+aH$+A<2+a$M+aF-+a6@+a*O+a1J+a-Q+a-T+a1S+a9N+aEE+a"),t(2,"#$&@#$(s#%'i#'&?%%')#'(S$''m%'(1'''K%)(S+&'K'*(3'/')(.'K*.'K0&(U4%(36%(33,'m-2(S)6(u#E'k13(U%A(u09(U'D(u?/(UB.(U=6(U<:(U?:(UF6(UQ.(U$^(uL9(Uc%(UQ;(UCM(Uf-(U`7(U")],s={min:0,L:0,M:1,Q:2,H:3,max:3},r=t=>"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:".indexOf(t),o=t=>t.charCodeAt(0),n=(...t)=>(e,s)=>t.forEach((t=>t(e,s))),i=t=>e=>{e.eci!==t&&(e.push(7,4),e.push(t,8),e.eci=t)},a=t=>(e,s)=>{e.push(4,4),e.push(t.length,8+8*(s>9)),t.forEach((t=>e.push(t,8)))},h=(t,e,s,r)=>{const o=r?e=>n(i(r),t(e)):t;return o.test=e,o.est=s,o.eci=r,o},l=h((t=>(e,s)=>{e.push(1,4),e.push(t.length,10+2*(s>26)+2*(s>9));let r=0;for(;r<t.length-2;r+=3)e.push(+t.slice(r,r+3),10);r<t.length-1?e.push(+t.slice(r,r+2),7):r<t.length&&e.push(+t[r],4)}),/./.test.bind(/[0-9]/),((t,e)=>14+2*(e>26)+2*(e>9)+10*t.length/3)),c=h((t=>(e,s)=>{e.push(2,4),e.push(t.length,9+2*(s>26)+2*(s>9));let o=0;for(;o<t.length-1;o+=2)e.push(45*r(t[o])+r(t[o+1]),11);o<t.length&&e.push(r(t[o]),6)}),(t=>r(t)>=0),((t,e)=>13+2*(e>26)+2*(e>9)+5.5*t.length)),f=h((t=>a([...t].map(o))),(t=>o(t)<128),((t,e)=>12+8*(e>9)+8*t.length)),u=h(f,(t=>o(t)<256),f.est,3),g=new TextEncoder,p=h((t=>a(g.encode(t))),(()=>1),((t,e)=>12+8*(e>9)+8*g.encode(t).length),26),d=t=>t.reduce(((t,e)=>e.e<t.e?e:t)),m=[l,c,f,u,p],w={auto:(t,{modes:e=m}={})=>(s,r)=>{let o=[{e:0}];for(let s=0;s<t.length;++s)if(o=e.filter((e=>e.test(t[s]))).map((e=>d(o.map((o=>{const n=o.m===e?o.s:s,i=o.m===e?o.p:o,a=t.slice(n,s+1),h=e.eci??i.i;return{m:e,p:i,s:n,v:a,e:i.e+12*(h!==i.i)+Math.ceil(e.est(a,r)),i:h}}))))),!o.length)throw new Error("Unencodable");const n=[];for(let t=d(o);t.m;t=t.p)n.unshift(t.m(t.v));n.forEach((t=>t(s,r)))},multi:n,eci:i,numeric:l,alphaNumeric:c,bytes:a,ascii:f,iso8859_1:u,utf8:p};class ${constructor(t){this.bytes=new Uint8Array(t),this.bits=0}push(t,e){for(let s=e,r=8-(7&this.bits);s>0;s-=r,r=8)this.bytes[this.bits>>>3]|=t<<r>>>s,this.bits+=s<r?s:r}}const U=t=>Array.isArray(t)?[...t,255]:[255&t,t>>>8&255,t>>>16&255,t>>>24];class A{constructor({size:t,d:e}){this.size=t,this.d=new Uint8Array(e||t*t)}get=(t,e)=>t>=0&&t<this.size&&!!(1&this.d[e*this.size+t]);masked=(t,e)=>2&this.d[e*this.size+t];set(t,e,s,r=1){this.d[e*this.size+t]=2*r|!!s}inv(t,e){this.d[e*this.size+t]^=1}toString({on:t="##",off:e="  ",lf:s="\n",padX:r=4,padY:o=4}={}){let n="";for(let i=-o;i<this.size+o;++i){for(let s=-r;s<this.size+r;++s)n+=this.get(s,i)?t:e;n+=s}return n}toImageData(t,{on:e=4278190080,off:s=0,padX:r=4,padY:o=4}={}){const n=this.size+2*r,i=this.size+2*o,a=t.createImageData(n,i),h=new Uint32Array(a.data.buffer);a.data.set(U(e));const l=h[0];a.data.set(U(s));const c=h[0];for(let t=0;t<i;++t)for(let e=0;e<n;++e)h[t*n+e]=this.get(e-r,t-o)?l:c;return a}toCanvas(t,e){const s=t.getContext("2d"),r=this.toImageData(s,e);t.width=r.width,t.height=r.height,s.putImageData(r,0,0)}toDataURL({type:t="image/png",scale:e=1,...s}={}){const r=document.createElement("canvas"),o=r.getContext("2d"),n=this.toImageData(o,s);return r.width=n.width*e,r.height=n.height*e,o.putImageData(n,0,0),o.imageSmoothingEnabled=!1,o.globalCompositeOperation="copy",o.drawImage(r,0,0,n.width,n.height,0,0,r.width,r.height),r.toDataURL(t,1)}}const z=[(t,e)=>!(1&(t^e)),(t,e)=>!(1&e),t=>!(t%3),(t,e)=>!((t+e)%3),(t,e)=>!(1&((t/3|0)^e>>1)),(t,e)=>!((t&e&1)+t*e%3),(t,e)=>!((t&e&1)+t*e%3&1),(t,e)=>!((1&(t^e))+t*e%3&1)],b=new Uint8Array(512);b[0]=1;for(let t=0,e=1;t<255;b[++t]=e)b[e+256]=t,e*=2,256&e&&(e^=285);const E=t=>b[t%255],y=t=>b[t+256],C=(t,e)=>{const s=new Uint8Array(t.length+e.length-1);for(let r=0;r<t.length;++r)for(let o=0;o<e.length;++o)s[r+o]^=E(t[r]+e[o]);return s.map(y)},I=(t,e)=>{const s=new Uint8Array(t.length+e.length-1);s.set(t,0);for(let r=0;r<t.length;++r)if(s[r]){const t=y(s[r]);for(let o=0;o<e.length;++o)s[r+o]^=E(e[o]+t)}return s.slice(t.length)},K=[[0],[0,0]];for(let t=1,e=K[1];t<30;++t){const s=C(e,[0,t]);K.push(s),e=s}const M=(t,e)=>{const s=[[],[]];let r=0,o=0;for(const[n,i]of e.g)for(let a=0;a<n;++a,r+=i){const n=t.slice(r,r+i);s[0].push(n),s[1].push(I(n,K[e.s])),o+=i+e.s}const n=new Uint8Array(o);let i=0;for(const t of s)for(let e,s=0;i!==e;++s){e=i;for(const e of t)s<e.length&&(n[i++]=e[s])}return n},v=(t,e,s)=>{let r=t<<s-1;for(let t=134217728;t;t>>>=1)r&t&&(r^=e*(t>>>s-1));return r},x=(t,e,s,r,o,n)=>{for(let i=s;i<o;++i)for(let s=e;s<r;++s)t.set(s,i,n)},L=(t,e,s)=>{x(t,e-3,s-3,e+4,s+4,1),x(t,e-2,s-2,e+3,s+3,0),x(t,e-1,s-1,e+2,s+2,1)},D=(t,e,s)=>{x(t,e-2,s-2,e+3,s+3,1),x(t,e-1,s-1,e+2,s+2,0),t.set(e,s,1)},S=(t,e)=>{const s=4*e+17;L(t,3,3),L(t,s-4,3),L(t,3,s-4),x(t,0,7,9,9,0),x(t,7,0,9,7,0),x(t,s-8,7,s,9,0),x(t,s-8,0,s-7,7,0),x(t,7,s-8,9,s,0),x(t,0,s-8,7,s-7,0),t.set(8,s-8,1);for(let e=8;e<s-8;++e)t.set(e,6,!(1&e)),t.set(6,e,!(1&e));if(e>=2){const r=1+(e/7|0),o=2*((s-13)/r/2+.75|0),n=[6];for(let t=r;t-- >0;)n.push(s-7-t*o);for(let e=0;e<=r;++e)for(let s=0;s<=r;++s)!e&&!s||!e&&s===r||e===r&&!s||D(t,n[e],n[s])}if(e>=7)for(let r=e<<12|v(e,7973,13),o=0;o<6;++o)for(let e=12;e-- >9;r>>>=1)t.set(o,s-e,1&r),t.set(s-e,o,1&r)},_=t=>{const e=t.size,s=[];for(let r=e-2,o=e,n=-1;r>=0;r-=2){for(5===r&&(r=4);o+=n,-1!==o&&o!==e;)t.masked(r+1,o)||s.push([r+1,o]),t.masked(r,o)||s.push([r,o]);n*=-1}return s},k=(t,e,s)=>{e.forEach((([e,r],o)=>t.set(e,r,s[o>>3]<<(7&o)&128,0)))},H=(t,e,s,r)=>{const o=t.size;for(let s=0;s<o;++s)for(let r=0;r<o;++r)e(r,s)&&!t.masked(r,s)&&t.inv(r,s);const n=r<<3|s;let i=21522^(n<<10|v(n,1335,11));for(let e=8;e-- >0;i>>=1)t.set(8,(e>1?7:8)-e,1&i),t.set(o-8+e,8,1&i);for(let e=7;e-- >0;i>>=1)t.set(e>5?7:e,8,1&i),t.set(8,o-e-1,1&i)},Q=(t,e,s)=>{for(let r=0;r<t.size;++r){let o=e,n=e;for(let e=0;e<t.size;++e)o=s(o,t.get(e,r)),n=s(n,t.get(r,e))}},Y=t=>(t=>{let e=0;return Q(t,[0],(([t,s],r)=>r!==s?[1,r]:(4===t?e+=3:t>4&&++e,[t+1,s]))),e})(t)+3*(t=>{let e=0;for(let s=1;s<t.size;++s){let r=t.get(s-1,0),o=t.get(s,0)===r;for(let n=1;n<t.size;++n){const i=t.get(s-1,n),a=t.get(s,n)===i;e+=o&&a&&r===i,r=i,o=a}}return e})(t)+40*(t=>{let e=0;return Q(t,0,((t,s)=>{const r=(t>>>1|2098176)&(3047517^s-1);return 2049&r&&++e,r})),e})(t)+(t=>{let e=0;for(let s=0;s<t.size;++s)for(let r=0;r<t.size;++r)e+=t.get(r,s);return 10*(20*Math.abs(e/(t.size*t.size)-.5)|0)})(t),B=[],J=(t,{minCorrectionLevel:r=s.min,maxCorrectionLevel:o=s.max,minVersion:n=1,maxVersion:i=40,mask:a,...h}={})=>{if(o<r)throw new Error("Invalid correction level range");if(i<n)throw new Error("Invalid version range");"string"==typeof t&&(t=w.auto(t,h));for(let s=n,h=0;s<=i;++s){if(e[r][s-1].c<h)continue;const n=new $(2956);t(n,s),h=n.bits;for(let t=o;t>=r;--t){const r=e[t][s-1];if(r.c<h)continue;for(n.push(0,4),n.bits=n.bits+7&-8;n.bits<r.c;)n.push(60433,16);let o=B[s];o||(B[s]=o=new A({size:4*s+17}),S(o,s),o.p=_(o));const i=new A(o);return k(i,o.p,M(n.bytes,r)),(z[a??-1]?[z[a]]:z).map(((t,e)=>{const s=new A(i);return H(s,t,a??e,r.i),s.s=Y(s),s})).reduce(((t,e)=>e.s<t.s?e:t))}}throw new Error("Too much data")};J.with=(...t)=>(e,s)=>J(e,{modes:[...m,...t],...s}),exports.correction=s,exports.generate=J,exports.mode=w;
