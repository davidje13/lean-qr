!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("lean-qr",[],e):"object"==typeof exports?exports["lean-qr"]=e():t["lean-qr"]=e()}(global,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function o(t){const e=4*t+17;let n=e*e-81-144-2*(e-9-8);if(t>=2){const e=Math.floor(t/7)+2;n-=25*(e*e-3)-10*(e-2)}return t>=7&&(n-=36),n}function r(t){const e=[{}];for(let n=1;n<=40;++n){const r=Math.floor(o(n)/8),[i,s]=t[n-1],a=Math.floor(i*s/(r-i)),l=Math.floor(i/a),f=i-l*a,c=[[l-f,a]];f&&c.push([f,a+1]),e.push({capBits:8*i,groups:c,ecsize:s})}return e}n.r(e),n.d(e,"corrections",(function(){return s})),n.d(e,"masks",(function(){return a})),n.d(e,"modes",(function(){return c})),n.d(e,"generate",(function(){return O}));const i=[{id:1,v:r([[19,7],[34,10],[55,15],[80,20],[108,26],[136,18],[156,20],[194,24],[232,30],[274,18],[324,20],[370,24],[428,26],[461,30],[523,22],[589,24],[647,28],[721,30],[795,28],[861,28],[932,28],[1006,28],[1094,30],[1174,30],[1276,26],[1370,28],[1468,30],[1531,30],[1631,30],[1735,30],[1843,30],[1955,30],[2071,30],[2191,30],[2306,30],[2434,30],[2566,30],[2702,30],[2812,30],[2956,30]])},{id:0,v:r([[16,10],[28,16],[44,26],[64,18],[86,24],[108,16],[124,18],[154,22],[182,22],[216,26],[254,30],[290,22],[334,22],[365,24],[415,24],[453,28],[507,28],[563,26],[627,26],[669,26],[714,26],[782,28],[860,28],[914,28],[1e3,28],[1062,28],[1128,28],[1193,28],[1267,28],[1373,28],[1455,28],[1541,28],[1631,28],[1725,28],[1812,28],[1914,28],[1992,28],[2102,28],[2216,28],[2334,28]])},{id:3,v:r([[13,13],[22,22],[34,18],[48,26],[62,18],[76,24],[88,18],[110,22],[132,20],[154,24],[180,28],[206,26],[244,24],[261,20],[295,30],[325,24],[367,28],[397,28],[445,26],[485,30],[512,28],[568,30],[614,30],[664,30],[718,30],[754,28],[808,30],[871,30],[911,30],[985,30],[1033,30],[1115,30],[1171,30],[1231,30],[1286,30],[1354,30],[1426,30],[1502,30],[1582,30],[1666,30]])},{id:2,v:r([[9,17],[16,28],[26,22],[36,16],[46,22],[60,28],[66,26],[86,26],[100,24],[122,28],[140,24],[158,28],[180,22],[197,24],[223,24],[253,30],[283,28],[313,28],[341,26],[385,28],[406,30],[442,24],[464,30],[514,30],[538,30],[596,30],[628,30],[661,30],[701,30],[745,30],[793,30],[845,30],[901,30],[961,30],[986,30],[1054,30],[1096,30],[1142,30],[1222,30],[1276,30]])}],s={min:0,L:0,M:1,Q:2,H:3,max:3};var a=[{id:0,fn:(t,e)=>!(1&(t^e))},{id:1,fn:(t,e)=>!(1&e)},{id:2,fn:t=>!(t%3)},{id:3,fn:(t,e)=>!((t+e)%3)},{id:4,fn:(t,e)=>!(1&(Math.floor(t/3)^Math.floor(e/2)))},{id:5,fn:(t,e)=>!(t&e&1^t*e%3)},{id:6,fn:(t,e)=>!((t&e&1)+t*e%3&1)},{id:7,fn:(t,e)=>!((1&(t^e))+t*e%3&1)}];function l(t,...e){for(let n=0;n<e.length-1;n+=2)if(t<e[n+1])return e[n];return e[e.length-1]}const f=t=>"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:".indexOf(t);var c={multi:(...t)=>(e,n)=>t.forEach(t=>t(e,n)),numeric:t=>(e,n)=>{e.addInt(1,4),e.addInt(t.length,l(n,10,10,12,27,14));let o=0;for(;o<t.length-2;o+=3)e.addInt(Number(t.substr(o,3)),10);o<t.length-1?e.addInt(Number(t.substr(o,2)),7):o<t.length&&e.addInt(Number(t.substr(o,1)),4)},alphaNumeric:t=>(e,n)=>{e.addInt(2,4),e.addInt(t.length,l(n,9,10,11,27,13));let o=0;for(;o<t.length-1;o+=2)e.addInt(45*f(t[o])+f(t[o+1]),11);o<t.length&&e.addInt(f(t[o]),6)},iso8859_1:t=>{const e=new TextEncoder("iso-8859-1").encode(t);return(t,n)=>{t.addInt(4,4),t.addInt(e.length,l(n,8,10,16));for(let n=0;n<e.length;++n)t.addInt(e[n],8)}}};class h{constructor(){this.data=[],this.infPad=0,this.infBits=0}get bits(){return this.data.length}toString(){let t="";for(let e=0;e<this.data.length;e+=8){t+="\n";for(let n=0;n<8;++n)t+=this.data[e+n]?"1":"0"}return t.substr(1)}byte(t){const e=8*t;for(;this.data.length<e+8&&this.infBits;)this.addInt(this.infPad,this.infBits);let n=0;for(let t=0;t<8;++t)n=n<<1|this.data[e+t];return n}addInt(t,e){for(let n=1<<e-1;n;n>>>=1)this.data.push(Boolean(t&n))}padToMultiple(t,e){const n=Math.ceil(this.data.length/t)*t-this.data.length;for(let t=0;t<n;++t)this.data.push(Boolean(e))}padToInf(t,e){this.infPad=t,this.infBits=e}}class u{constructor(t,e){t instanceof u?(this.width=t.width,this.height=t.height,this.step=t.step,this.data=new Uint8Array(t.data)):(this.width=t,this.height=e,this.step=Math.ceil(t/4),this.data=new Uint8Array(this.step*this.height))}get(t,e){return Boolean(this.data[e*this.step+(t>>2)]&1<<2*(3&t))}isMasked(t,e){return Boolean(this.data[e*this.step+(t>>2)]&2<<2*(3&t))}setAsMask(t,e,n=!0){const o=e*this.step+(t>>2),r=2*(3&t);this.data[o]&=~(3<<r),this.data[o]|=(2|Boolean(n))<<r}setNoMask(t,e,n=!0){const o=e*this.step+(t>>2),r=2*(3&t);this.data[o]&=~(3<<r),this.data[o]|=Boolean(n)<<r}xor(t,e,n=!0){this.data[e*this.step+(t>>2)]^=Boolean(n)<<2*(3&t)}xorIfUnmasked(t,e,n=!0){const o=e*this.step+(t>>2);this.data[o]^=Boolean(n)<<2*(3&t)&~(this.data[o]>>1)}}const d=function(t,e){const n=t-1,o=new Uint32Array(t),r=new Uint32Array(t);let i=1;for(let s=0;s<n;++s)o[s]=i,r[i]=s,i*=2,i>=t&&(i^=e);return o[n]=i,{e:t=>o[t%n],ln:t=>r[t]}}(256,285);function p(t,e,n){const o=new Uint32Array(e.length+n.length-1);for(let r=0;r<e.length;++r)for(let i=0;i<n.length;++i)o[r+i]^=t.e(e[r]+n[i]);return o.map(t.ln)}const g=[[0],[0,0]];for(let t=1,e=g[1];t<30;++t){const n=p(d,e,[0,t]);g.push(n),e=n}function M(t,e){return new Uint8Array(function(t,e,n){const o=new Uint32Array(e.length+n.length-1);o.set(e,0);for(let r=0;r<e.length;++r){if(!o[r])continue;const e=t.ln(o[r]);for(let i=0;i<n.length;++i)o[r+i]^=t.e(n[i]+e)}return o.slice(e.length)}(d,t,g[e]))}function m(t,e,n){let o=e;const r=Math.max(...n.map(t=>t.length));for(let e=0;e<r;++e)n.forEach(n=>{e<n.length&&(t[o++]=n[e])});return o}function w(t,{groups:e,ecsize:n}){const o=[],r=[];let i=0,s=0;e.forEach(([e,a])=>{for(let s=0;s<e;++s){const e=new Uint8Array(a);for(let n=0;n<a;++n)e[n]=t.byte(i++);o.push(e),r.push(M(e,n))}s+=e*(a+n)});const a=new Uint8Array(s),l=m(a,0,o);return m(a,l,r),a}function b(t,e,n){let o=t<<n-1;for(let t=1073741824;t;t>>>=1)o&t&&(o^=e*(t>>>n-1));return o}function y(t,e,n,o,r,i){for(let s=n;s<r;++s)for(let n=e;n<o;++n)t.setAsMask(n,s,i)}function I(t,e,n,o,r,i){y(t,e,n,o,n+1,i),y(t,e,n+1,e+1,r,i),y(t,o-1,n+1,o,r,i),y(t,e+1,r-1,o-1,r,i)}function v(t,e,n){I(t,e-3,n-3,e+4,n+4,!0),I(t,e-2,n-2,e+3,n+3,!1),y(t,e-1,n-1,e+2,n+2,!0)}function A(t,e,n){I(t,e-2,n-2,e+3,n+3,!0),I(t,e-1,n-1,e+2,n+2,!1),t.setAsMask(e,n,!0)}function k(t,e,n){let o=0,r=128;e.forEach(([e,i])=>{const s=n[o]&r;t.setNoMask(e,i,s),r>>>=1,r||(++o,r=128)})}function x(t,e,n){for(let n=0;n<t.height;++n)for(let o=0;o<t.width;++o)t.xorIfUnmasked(o,n,e.fn(o,n));const o=n<<3|e.id,r=21522^(o<<10|b(o,1335,11));let i=16384;for(let e=0;e<7;++e){const n=r&i;t.setAsMask(6===e?7:e,8,n),t.setAsMask(8,t.height-e-1,n),i>>>=1}for(let e=0;e<8;++e){const n=r&i;t.setAsMask(8,(e>1?7:8)-e,n),t.setAsMask(t.width-8+e,8,n),i>>>=1}}function B(t,e,n){for(let o=0;o<t.height;++o){let r=e;for(let e=0;e<t.width;++e)r=n(r,t.get(e,o))}for(let o=0;o<t.width;++o){let r=e;for(let e=0;e<t.height;++e)r=n(r,t.get(o,e))}}function U(t){return function(t){let e=0;return B(t,[0,void 0],([t,n],o)=>o!==n?[1,o]:(4===t?e+=3:t>4&&++e,[t+1,n])),e}(t)+3*function(t){let e=0;for(let n=0;n<t.width-1;++n){let o=t.get(n,0),r=t.get(n+1,0)===o;for(let i=0;i<t.height-1;++i){const s=t.get(n,i),a=t.get(n+1,i)===s;r&&a&&o===s?++e:(o=s,r=a)}}return e}(t)+40*function(t){let e=0;return B(t,0,(t,n)=>{const o=(t>>>1|2098176)&(3047517^(n?0:-1));return 2049&o&&++e,o}),e}(t)+function(t){let e=0;for(let n=0;n<t.height;++n)for(let o=0;o<t.width;++o)e+=t.get(o,n);return 10*Math.floor(20*Math.abs(e/(t.width*t.height)-.5))}(t)}const E=t=>t.addInt(0,4),T=new Map;function j(t){if(!T.has(t)){const e=4*t+17,n=new u(e,e);!function(t,e){const n=4*e+17;v(t,3,3),v(t,n-4,3),v(t,3,n-4),y(t,0,7,9,9,!1),y(t,7,0,9,7,!1),y(t,n-8,7,n,9,!1),y(t,n-8,0,n-7,7,!1),y(t,7,n-8,9,n,!1),y(t,0,n-8,7,n-7,!1),t.setAsMask(8,n-8,!0);for(let e=8;e<n-8;++e)t.setAsMask(e,6,!(1&e)),t.setAsMask(6,e,!(1&e));if(e>=2){const o=Math.floor(e/7)+2,r=(n-13)/(o-1);for(let e=0;e<o;++e)for(let n=0;n<o;++n)0===e&&0===n||0===e&&n===o-1||e===o-1&&0===n||A(t,e*r+6,n*r+6)}if(e>=7){const o=e<<12|b(e,7973,13);let r=1<<17;for(let e=6;e-- >0;)for(let i=0;i<3;++i){const s=o&r;t.setAsMask(e,n-9-i,s),t.setAsMask(n-9-i,e,s),r>>>=1}}}(n,t);const o=function(t){const e=t.width,n=t.height,o=[];let r=-1,i=n;for(let s=e-2;s>=0;s-=2){for(5===s&&(s=4),i+=r;-1!==i&&i!==n;i+=r)t.isMasked(s+1,i)||o.push([s+1,i]),t.isMasked(s,i)||o.push([s,i]);r*=-1}return o}(n);T.set(t,{code:n,path:o})}const e=T.get(t);return{code:new u(e.code),path:e.path}}function N(t,e){let n=null,o=Number.POSITIVE_INFINITY;return a.forEach(r=>{const i=new u(t);x(i,r,e.id);const s=U(i);s<o&&(n=i,o=s)}),n}function O(t,{minCorrectionLevel:e=s.min,maxCorrectionLevel:n=s.max,minVersion:o=1,maxVersion:r=40,mask:a=null}={}){if(n<e)throw new Error("Invalid correction level range");if(r<o)throw new Error("Invalid version range");let l=0;for(let s=o;s<=r;++s){if(i[e].v[s].capBits<l)continue;const o=new h;t(o,s),l=o.bits,E(o),o.padToMultiple(8,!1),o.padToInf(60433,16);for(let t=n;t>=e;--t){const e=i[t],n=e.v[s];if(n.capBits<l)continue;const{code:r,path:f}=j(s);return k(r,f,w(o,n)),a?(x(r,a,e.id),r):N(r,e)}}throw new Error("Too much data")}}])}));
//# sourceMappingURL=index.js.map