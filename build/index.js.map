{"version":3,"sources":["webpack://lean-qr/webpack/universalModuleDefinition","webpack://lean-qr/webpack/bootstrap","webpack://lean-qr/./src/qr/options/corrections.mjs","webpack://lean-qr/./src/qr/options/masks.mjs","webpack://lean-qr/./src/qr/options/modes.mjs","webpack://lean-qr/./src/structures/Bitmap1D.mjs","webpack://lean-qr/./src/structures/Bitmap2D.mjs","webpack://lean-qr/./src/qr/galoisPolynomial.mjs","webpack://lean-qr/./src/qr/errorCorrection.mjs","webpack://lean-qr/./src/qr/draw.mjs","webpack://lean-qr/./src/qr/score.mjs","webpack://lean-qr/./src/qr/generate.mjs"],"names":["root","factory","exports","module","define","amd","global","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","pixelsForVersion","version","size","total","numAlignment","Math","floor","calculate","data","versions","totalBytes","capacity","ecsize","bsize","totalBlocks","g2n","groups","push","L","id","M","Q","H","fn","x","y","lookup","pos","length","alnum","indexOf","multi","encodings","forEach","enc","numeric","addInt","Number","substr","alphaNumeric","iso8859_1","bytes","TextEncoder","encode","Bitmap1D","constructor","this","infPad","infBits","toString","byte","index","v","bits","mask","Boolean","padToMultiple","divisor","bitFill","count","ceil","padToInf","padding","paddingBits","Bitmap2D","width","height","step","Uint8Array","isMasked","setAsMask","setNoMask","xor","xorIfUnmasked","gf256","modulo","mod","e","Uint32Array","ln","makeGaloisField","multPolyLn","gf","p1Ln","p2Ln","result","j","map","remBinPoly","num","den","denBits","remainder","generators","last","next","calculateECBlock","denLn","set","shift","slice","remPoly","interleave","target","offset","blocks","lim","max","block","calculateEC","versionData","eccs","nBlocks","b","drawRect","code","x1","y1","x2","y2","drawRectOutline","drawPlacement","drawAlignment","drawCode","path","bit","applyMask","ecId","info","pattern","chk","state","hv","state0","scoreCode","score","undefined","consec","cur","scoreLines","lastV","lastM","curV","curM","countBoxes","countPatterns","totalOn","abs","scoreImbalance","EncodeEnd","baseCache","Map","getBase","has","stepAlignment","vInfo","drawFrame","w","h","dirY","xB","getPath","cached","generate","modeData","correctionLevel","corrections","minVersion","maxVersion","endOfUsefulData","versionedCorrection","ec","bestMasked","bestMaskScore","POSITIVE_INFINITY","masks","masked","Error"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"lean-qr\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"lean-qr\"] = factory();\n\telse\n\t\troot[\"lean-qr\"] = factory();\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/* eslint-disable array-bracket-spacing, no-multi-spaces, operator-linebreak */\n\nfunction pixelsForVersion(version) {\n  const size = version * 4 + 17;\n  let total = (\n    size * size          // total area\n    - 9 * 9              // TL placement\n    - 9 * 8 * 2          // TR & BL placement\n    - (size - 9 - 8) * 2 // timing pattern\n  );\n  if (version >= 2) {\n    const numAlignment = Math.floor(version / 7) + 2;\n    total -= (\n      5 * 5 * (numAlignment * numAlignment - 3) // alignment blocks\n      - 5 * 2 * (numAlignment - 2) // do not overcount timing pattern/alignment overlap\n    );\n  }\n  if (version >= 7) {\n    total -= 3 * 6 * 2; // version identifiers\n  }\n  return total;\n}\n\nfunction calculate(data) {\n  const versions = [];\n  for (let version = 1; version <= 40; ++version) {\n    const totalBytes = Math.floor(pixelsForVersion(version) / 8);\n    const [capacity, ecsize] = data[version - 1];\n    const bsize = Math.floor((capacity * ecsize) / (totalBytes - capacity));\n    const totalBlocks = Math.floor(capacity / bsize);\n    const g2n = capacity - (totalBlocks * bsize);\n    const g1n = totalBlocks - g2n;\n    const groups = [[g1n, bsize]];\n    if (g2n) {\n      groups.push([g2n, bsize + 1]);\n    }\n    versions.push({\n      capacity,\n      groups,\n      ecsize,\n    });\n  }\n  return versions;\n}\n\n// TODO: identify algorithm for these values\n// Thanks, https://www.thonky.com/qr-code-tutorial/error-correction-table\n\nconst LData = [\n  [  19,  7], // v1\n  [  34, 10],\n  [  55, 15],\n  [  80, 20],\n  [ 108, 26],\n  [ 136, 18],\n  [ 156, 20],\n  [ 194, 24],\n  [ 232, 30],\n  [ 274, 18], // v10\n  [ 324, 20],\n  [ 370, 24],\n  [ 428, 26],\n  [ 461, 30],\n  [ 523, 22],\n  [ 589, 24],\n  [ 647, 28],\n  [ 721, 30],\n  [ 795, 28],\n  [ 861, 28], // v20\n  [ 932, 28],\n  [1006, 28],\n  [1094, 30],\n  [1174, 30],\n  [1276, 26],\n  [1370, 28],\n  [1468, 30],\n  [1531, 30],\n  [1631, 30],\n  [1735, 30], // v30\n  [1843, 30],\n  [1955, 30],\n  [2071, 30],\n  [2191, 30],\n  [2306, 30],\n  [2434, 30],\n  [2566, 30],\n  [2702, 30],\n  [2812, 30],\n  [2956, 30], // v40\n];\n\nconst MData = [\n  [  16, 10], // v1\n  [  28, 16],\n  [  44, 26],\n  [  64, 18],\n  [  86, 24],\n  [ 108, 16],\n  [ 124, 18],\n  [ 154, 22],\n  [ 182, 22],\n  [ 216, 26], // v10\n  [ 254, 30],\n  [ 290, 22],\n  [ 334, 22],\n  [ 365, 24],\n  [ 415, 24],\n  [ 453, 28],\n  [ 507, 28],\n  [ 563, 26],\n  [ 627, 26],\n  [ 669, 26], // v20\n  [ 714, 26],\n  [ 782, 28],\n  [ 860, 28],\n  [ 914, 28],\n  [1000, 28],\n  [1062, 28],\n  [1128, 28],\n  [1193, 28],\n  [1267, 28],\n  [1373, 28], // v30\n  [1455, 28],\n  [1541, 28],\n  [1631, 28],\n  [1725, 28],\n  [1812, 28],\n  [1914, 28],\n  [1992, 28],\n  [2102, 28],\n  [2216, 28],\n  [2334, 28], // v40\n];\n\nconst QData = [\n  [  13, 13], // v1\n  [  22, 22],\n  [  34, 18],\n  [  48, 26],\n  [  62, 18],\n  [  76, 24],\n  [  88, 18],\n  [ 110, 22],\n  [ 132, 20],\n  [ 154, 24], // v10\n  [ 180, 28],\n  [ 206, 26],\n  [ 244, 24],\n  [ 261, 20],\n  [ 295, 30],\n  [ 325, 24],\n  [ 367, 28],\n  [ 397, 28],\n  [ 445, 26],\n  [ 485, 30], // v20\n  [ 512, 28],\n  [ 568, 30],\n  [ 614, 30],\n  [ 664, 30],\n  [ 718, 30],\n  [ 754, 28],\n  [ 808, 30],\n  [ 871, 30],\n  [ 911, 30],\n  [ 985, 30], // v30\n  [1033, 30],\n  [1115, 30],\n  [1171, 30],\n  [1231, 30],\n  [1286, 30],\n  [1354, 30],\n  [1426, 30],\n  [1502, 30],\n  [1582, 30],\n  [1666, 30], // v40\n];\n\nconst HData = [\n  [   9, 17], // v1\n  [  16, 28],\n  [  26, 22],\n  [  36, 16],\n  [  46, 22],\n  [  60, 28],\n  [  66, 26],\n  [  86, 26],\n  [ 100, 24],\n  [ 122, 28], // v10\n  [ 140, 24],\n  [ 158, 28],\n  [ 180, 22],\n  [ 197, 24],\n  [ 223, 24],\n  [ 253, 30],\n  [ 283, 28],\n  [ 313, 28],\n  [ 341, 26],\n  [ 385, 28], // v20\n  [ 406, 30],\n  [ 442, 24],\n  [ 464, 30],\n  [ 514, 30],\n  [ 538, 30],\n  [ 596, 30],\n  [ 628, 30],\n  [ 661, 30],\n  [ 701, 30],\n  [ 745, 30], // v30\n  [ 793, 30],\n  [ 845, 30],\n  [ 901, 30],\n  [ 961, 30],\n  [ 986, 30],\n  [1054, 30],\n  [1096, 30],\n  [1142, 30],\n  [1222, 30],\n  [1276, 30], // v40\n];\n\nexport default {\n  L: { id: 0b01, versions: calculate(LData) },\n  M: { id: 0b00, versions: calculate(MData) },\n  Q: { id: 0b11, versions: calculate(QData) },\n  H: { id: 0b10, versions: calculate(HData) },\n};\n","export default [\n  { id: 0b000, fn: (x, y) => !((x ^ y) & 1) },\n  { id: 0b001, fn: (x, y) => !(y & 1) },\n  { id: 0b010, fn: (x) => !(x % 3) },\n  { id: 0b011, fn: (x, y) => !((x + y) % 3) },\n  { id: 0b100, fn: (x, y) => !((Math.floor(x / 3) ^ Math.floor(y / 2)) & 1) },\n  { id: 0b101, fn: (x, y) => !((x & y & 1) ^ ((x * y) % 3)) },\n  { id: 0b110, fn: (x, y) => !(((x & y & 1) + ((x * y) % 3)) & 1) },\n  { id: 0b111, fn: (x, y) => !((((x ^ y) & 1) + ((x * y) % 3)) & 1) },\n];\n","function lookup(pos, ...data) {\n  for (let i = 0; i < data.length - 1; i += 2) {\n    if (pos < data[i + 1]) {\n      return data[i];\n    }\n  }\n  return data[data.length - 1];\n}\n\nconst alnum = (c) => '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:'.indexOf(c);\n\nexport default {\n  multi: (...encodings) => (data, version) => encodings.forEach((enc) => enc(data, version)),\n\n  numeric: (value) => (data, version) => {\n    data.addInt(0b0001, 4);\n    data.addInt(value.length, lookup(version, 10, 10, 12, 27, 14));\n    let i = 0;\n    for (; i < value.length - 2; i += 3) {\n      data.addInt(Number(value.substr(i, 3)), 10);\n    }\n    if (i < value.length - 1) {\n      data.addInt(Number(value.substr(i, 2)), 7);\n    } else if (i < value.length) {\n      data.addInt(Number(value.substr(i, 1)), 4);\n    }\n  },\n\n  alphaNumeric: (value) => (data, version) => {\n    data.addInt(0b0010, 4);\n    data.addInt(value.length, lookup(version, 9, 10, 11, 27, 13));\n    let i = 0;\n    for (; i < value.length - 1; i += 2) {\n      data.addInt(alnum(value[i]) * 45 + alnum(value[i + 1]), 11);\n    }\n    if (i < value.length) {\n      data.addInt(alnum(value[i]), 6);\n    }\n  },\n\n  iso8859_1: (value) => {\n    const bytes = new TextEncoder('iso-8859-1').encode(value);\n    return (data, version) => {\n      data.addInt(0b0100, 4);\n      data.addInt(bytes.length, lookup(version, 8, 10, 16));\n      for (let i = 0; i < bytes.length; ++i) {\n        data.addInt(bytes[i], 8);\n      }\n    };\n  },\n};\n","export default class Bitmap1D {\n  constructor() {\n    this.data = [];\n    this.infPad = 0;\n    this.infBits = 0;\n  }\n\n  get bits() {\n    return this.data.length;\n  }\n\n  toString() {\n    let r = '';\n    for (let i = 0; i < this.data.length; i += 8) {\n      r += '\\n';\n      for (let p = 0; p < 8; ++p) {\n        r += (this.data[i + p] ? '1' : '0');\n      }\n    }\n    return r.substr(1);\n  }\n\n  byte(index) {\n    const p = index * 8;\n    while (this.data.length < p + 8 && this.infBits) {\n      this.addInt(this.infPad, this.infBits);\n    }\n\n    let v = 0;\n    for (let i = 0; i < 8; ++i) {\n      v = (v << 1) | this.data[p + i];\n    }\n    return v;\n  }\n\n  addInt(value, bits) {\n    for (let mask = 1 << (bits - 1); mask; mask >>>= 1) {\n      this.data.push(Boolean(value & mask));\n    }\n  }\n\n  padToMultiple(divisor, bitFill) {\n    const count = Math.ceil(this.data.length / divisor) * divisor - this.data.length;\n    for (let i = 0; i < count; ++i) {\n      this.data.push(Boolean(bitFill));\n    }\n  }\n\n  padToInf(padding, paddingBits) {\n    this.infPad = padding;\n    this.infBits = paddingBits;\n  }\n}\n","export default class Bitmap2D {\n  constructor(width, height) {\n    if (width instanceof Bitmap2D) {\n      this.width = width.width;\n      this.height = width.height;\n      this.step = width.step;\n      this.data = new Uint8Array(width.data);\n    } else {\n      this.width = width;\n      this.height = height;\n      this.step = Math.ceil(width / 4);\n      this.data = new Uint8Array(this.step * this.height);\n    }\n  }\n\n  get(x, y) {\n    return Boolean(this.data[y * this.step + (x >> 2)] & (0b01 << ((x & 3) * 2)));\n  }\n\n  isMasked(x, y) {\n    return Boolean(this.data[y * this.step + (x >> 2)] & (0b10 << ((x & 3) * 2)));\n  }\n\n  setAsMask(x, y, value = true) {\n    const p = y * this.step + (x >> 2);\n    const s = (x & 3) * 2;\n    this.data[p] &= ~(0b11 << s);\n    this.data[p] |= ((0b10 | Boolean(value)) << s);\n  }\n\n  setNoMask(x, y, value = true) {\n    const p = y * this.step + (x >> 2);\n    const s = (x & 3) * 2;\n    this.data[p] &= ~(0b11 << s);\n    this.data[p] |= (Boolean(value) << s);\n  }\n\n  xor(x, y, value = true) {\n    this.data[y * this.step + (x >> 2)] ^= (Boolean(value) << ((x & 3) * 2));\n  }\n\n  xorIfUnmasked(x, y, value = true) {\n    const p = y * this.step + (x >> 2);\n    this.data[p] ^= (Boolean(value) << ((x & 3) * 2)) & ~(this.data[p] >> 1);\n  }\n}\n","function makeGaloisField(size, modulo) {\n  const mod = size - 1;\n  const e = new Uint32Array(size);\n  const ln = new Uint32Array(size);\n  let v = 1;\n  for (let i = 0; i < mod; ++i) {\n    e[i] = v;\n    ln[v] = i;\n    v *= 2;\n    if (v >= size) {\n      v ^= modulo;\n    }\n  }\n  e[mod] = v;\n  return {\n    // e: (x) => e[((x % mod) + mod) % mod],\n    e: (x) => e[x % mod], // assume x is never negative\n    ln: (x) => ln[x],\n  };\n}\n\nexport const gf256 = makeGaloisField(256, 285);\n\nexport function multPolyLn(gf, p1Ln, p2Ln) {\n  const result = new Uint32Array(p1Ln.length + p2Ln.length - 1);\n  for (let i = 0; i < p1Ln.length; ++i) {\n    for (let j = 0; j < p2Ln.length; ++j) {\n      result[i + j] ^= gf.e(p1Ln[i] + p2Ln[j]);\n    }\n  }\n  return result.map(gf.ln);\n}\n\nexport function remPoly(gf, num, denLn) {\n  const remainder = new Uint32Array(num.length + denLn.length - 1);\n  remainder.set(num, 0);\n  for (let i = 0; i < num.length; ++i) {\n    if (!remainder[i]) {\n      continue;\n    }\n    // assume denLn[0] === 0 (true for all generator polys)\n    const shift = gf.ln(remainder[i]); // - denLn[0];\n    for (let j = 0; j < denLn.length; ++j) {\n      remainder[i + j] ^= gf.e(denLn[j] + shift);\n    }\n  }\n  return remainder.slice(num.length);\n}\n\nexport function remBinPoly(num, den, denBits) {\n  let remainder = num << (denBits - 1);\n  for (let i = 0x40000000; i; i >>>= 1) {\n    if (remainder & i) {\n      remainder ^= den * (i >>> (denBits - 1));\n    }\n  }\n  return remainder;\n}\n","import { gf256, multPolyLn, remPoly } from './galoisPolynomial.mjs';\n\nconst generators = [[0], [0, 0]];\nfor (let i = 1, last = generators[1]; i < 30; ++i) {\n  const next = multPolyLn(gf256, last, [0, i]);\n  generators.push(next);\n  last = next;\n}\n\nfunction calculateECBlock(bytes, ecsize) {\n  return new Uint8Array(remPoly(gf256, bytes, generators[ecsize]));\n}\n\nfunction interleave(target, offset, blocks) {\n  /* eslint-disable no-param-reassign, no-loop-func */\n  let p = offset;\n  const lim = Math.max(...blocks.map((block) => block.length));\n  for (let i = 0; i < lim; ++i) {\n    blocks.forEach((block) => {\n      if (i < block.length) {\n        target[p++] = block[i];\n      }\n    });\n  }\n  /* eslint-enable no-param-reassign, no-loop-func */\n  return p;\n}\n\nexport default function calculateEC(versionData, { groups, ecsize }) {\n  const blocks = [];\n  const eccs = [];\n\n  let p = 0;\n  let size = 0;\n  groups.forEach(([nBlocks, bytes]) => {\n    for (let b = 0; b < nBlocks; ++b) {\n      const block = new Uint8Array(bytes);\n      for (let i = 0; i < bytes; ++i) {\n        block[i] = versionData.byte(p++);\n      }\n      blocks.push(block);\n      eccs.push(calculateECBlock(block, ecsize));\n    }\n    size += nBlocks * (bytes + ecsize);\n  });\n\n  const result = new Uint8Array(size);\n  const pos = interleave(result, 0, blocks);\n  interleave(result, pos, eccs);\n  return result;\n}\n","import { remBinPoly } from './galoisPolynomial.mjs';\n\nfunction drawRect(code, x1, y1, x2, y2, value) {\n  for (let y = y1; y < y2; ++y) {\n    for (let x = x1; x < x2; ++x) {\n      code.setAsMask(x, y, value);\n    }\n  }\n}\n\nfunction drawRectOutline(code, x1, y1, x2, y2, value) {\n  drawRect(code, x1, y1, x2, y1 + 1, value);\n  drawRect(code, x1, y1 + 1, x1 + 1, y2, value);\n  drawRect(code, x2 - 1, y1 + 1, x2, y2, value);\n  drawRect(code, x1 + 1, y2 - 1, x2 - 1, y2, value);\n}\n\nfunction drawPlacement(code, x, y) {\n  drawRectOutline(code, x - 3, y - 3, x + 4, y + 4, true);\n  drawRectOutline(code, x - 2, y - 2, x + 3, y + 3, false);\n  drawRect(code, x - 1, y - 1, x + 2, y + 2, true);\n}\n\nfunction drawAlignment(code, x, y) {\n  drawRectOutline(code, x - 2, y - 2, x + 3, y + 3, true);\n  drawRectOutline(code, x - 1, y - 1, x + 2, y + 2, false);\n  code.setAsMask(x, y, true);\n}\n\nexport function drawFrame(code, version) {\n  const size = version * 4 + 17;\n  drawPlacement(code, 3, 3);\n  drawPlacement(code, size - 4, 3);\n  drawPlacement(code, 3, size - 4);\n  drawRect(code, 0, 7, 9, 9, false);\n  drawRect(code, 7, 0, 9, 7, false);\n  drawRect(code, size - 8, 7, size, 9, false);\n  drawRect(code, size - 8, 0, size - 7, 7, false);\n  drawRect(code, 7, size - 8, 9, size, false);\n  drawRect(code, 0, size - 8, 7, size - 7, false);\n  code.setAsMask(8, size - 8, true);\n  for (let i = 8; i < size - 8; ++i) {\n    code.setAsMask(i, 6, !(i & 1));\n    code.setAsMask(6, i, !(i & 1));\n  }\n  if (version >= 2) {\n    const numAlignment = Math.floor(version / 7) + 2;\n    const stepAlignment = (size - 13) / (numAlignment - 1);\n    for (let i = 0; i < numAlignment; ++i) {\n      for (let j = 0; j < numAlignment; ++j) {\n        if (\n          (i === 0 && j === 0) ||\n          (i === 0 && j === numAlignment - 1) ||\n          (i === numAlignment - 1 && j === 0)\n        ) {\n          continue;\n        }\n        drawAlignment(code, i * stepAlignment + 6, j * stepAlignment + 6);\n      }\n    }\n  }\n  if (version >= 7) {\n    const vInfo = (version << 12) | remBinPoly(version, 0b1111100100101, 13);\n    let m = 1 << 17;\n    for (let j = 6; (j--) > 0;) {\n      for (let i = 0; i < 3; ++i) {\n        const state = vInfo & m;\n        code.setAsMask(j, size - 9 - i, state);\n        code.setAsMask(size - 9 - i, j, state);\n        m >>>= 1;\n      }\n    }\n  }\n}\n\nexport function getPath(code) {\n  const w = code.width;\n  const h = code.height;\n  const result = [];\n  let dirY = -1;\n  let y = h;\n  for (let xB = w - 2; xB >= 0; xB -= 2) {\n    if (xB === 5) { // special case: skip vertical timing pattern line\n      xB = 4;\n    }\n    for (y += dirY; y !== -1 && y !== h; y += dirY) {\n      if (!code.isMasked(xB + 1, y)) {\n        result.push([xB + 1, y]);\n      }\n      if (!code.isMasked(xB, y)) {\n        result.push([xB, y]);\n      }\n    }\n    dirY *= -1;\n  }\n  return result;\n}\n\nexport function drawCode(target, path, data) {\n  let byte = 0;\n  let bit = 0b10000000;\n  path.forEach(([x, y]) => {\n    const v = data[byte] & bit;\n    target.setNoMask(x, y, v);\n    bit >>>= 1;\n    if (!bit) {\n      ++byte;\n      bit = 0b10000000;\n    }\n  });\n}\n\nexport function applyMask(target, mask, ecId) {\n  for (let y = 0; y < target.height; ++y) {\n    for (let x = 0; x < target.width; ++x) {\n      target.xorIfUnmasked(x, y, mask.fn(x, y));\n    }\n  }\n  const info = ((ecId << 3) | mask.id);\n  const pattern = 0b101010000010010 ^ ((info << 10) | remBinPoly(info, 0b10100110111, 11));\n  let chk = 0b100000000000000;\n  for (let i = 0; i < 7; ++i) {\n    const state = pattern & chk;\n    target.setAsMask(i === 6 ? 7 : i, 8, state);\n    target.setAsMask(8, target.height - i - 1, state);\n    chk >>>= 1;\n  }\n  for (let i = 0; i < 8; ++i) {\n    const state = pattern & chk;\n    target.setAsMask(8, (i > 1 ? 7 : 8) - i, state);\n    target.setAsMask(target.width - 8 + i, 8, state);\n    chk >>>= 1;\n  }\n}\n","function hv(code, state0, fn) {\n  for (let y = 0; y < code.height; ++y) {\n    let state = state0;\n    for (let x = 0; x < code.width; ++x) {\n      state = fn(state, code.get(x, y));\n    }\n  }\n  for (let x = 0; x < code.width; ++x) {\n    let state = state0;\n    for (let y = 0; y < code.height; ++y) {\n      state = fn(state, code.get(x, y));\n    }\n  }\n}\n\nfunction scoreLines(code) {\n  let score = 0;\n  hv(code, [0, undefined], ([consec, last], cur) => {\n    if (cur !== last) {\n      return [1, cur];\n    }\n    if (consec === 4) {\n      score += 3;\n    } else if (consec > 4) {\n      ++score;\n    }\n    return [consec + 1, last];\n  });\n  return score;\n}\n\nfunction countBoxes(code) {\n  let score = 0;\n  for (let x = 0; x < code.width - 1; ++x) {\n    let lastV = code.get(x, 0);\n    let lastM = code.get(x + 1, 0) === lastV;\n    for (let y = 0; y < code.height - 1; ++y) {\n      const curV = code.get(x, y);\n      const curM = code.get(x + 1, y) === curV;\n      if (lastM && curM && lastV === curV) {\n        ++score;\n      } else {\n        lastV = curV;\n        lastM = curM;\n      }\n    }\n  }\n  return score;\n}\n\nfunction countPatterns(code) {\n  let score = 0;\n  /* eslint-disable no-multi-spaces */\n  const begin   = 0b10000000000_10000000000;\n  const pattern = 0b10111010000_00001011101;\n  const end     = 0b00000000001_00000000001;\n  /* eslint-enable no-multi-spaces */\n  hv(code, 0, (state, cur) => {\n    const next = ((state >>> 1) | begin) & (pattern ^ (cur ? 0 : -1));\n    if (next & end) {\n      ++score;\n    }\n    return next;\n  });\n  return score;\n}\n\nfunction scoreImbalance(code) {\n  let totalOn = 0;\n  for (let y = 0; y < code.height; ++y) {\n    for (let x = 0; x < code.width; ++x) {\n      totalOn += code.get(x, y);\n    }\n  }\n  return Math.floor(20 * Math.abs(totalOn / (code.width * code.height) - 0.5)) * 10;\n}\n\nexport default function scoreCode(code) {\n  return (\n    scoreLines(code) +\n    countBoxes(code) * 3 +\n    countPatterns(code) * 40 +\n    scoreImbalance(code)\n  );\n}\n","import Bitmap1D from '../structures/Bitmap1D.mjs';\nimport Bitmap2D from '../structures/Bitmap2D.mjs';\nimport masks from './options/masks.mjs';\nimport corrections from './options/corrections.mjs';\nimport calculateEC from './errorCorrection.mjs';\nimport {\n  drawFrame,\n  getPath,\n  drawCode,\n  applyMask,\n} from './draw.mjs';\nimport scoreCode from './score.mjs';\n\nconst EncodeEnd = (data) => data.addInt(0b0000, 4);\n\nconst baseCache = new Map();\n\nfunction getBase(version) {\n  if (!baseCache.has(version)) {\n    const size = version * 4 + 17;\n    const code = new Bitmap2D(size, size);\n    drawFrame(code, version);\n    const path = getPath(code);\n    baseCache.set(version, { code, path });\n  }\n  const cached = baseCache.get(version);\n  return {\n    code: new Bitmap2D(cached.code),\n    path: cached.path,\n  };\n}\n\nexport default function generate(modeData, {\n  correctionLevel = corrections.L,\n  minVersion = 1,\n  maxVersion = 40,\n  mask = null,\n} = {}) {\n  for (let version = minVersion; version <= maxVersion; ++version) {\n    const data = new Bitmap1D();\n    modeData(data, version);\n    const endOfUsefulData = data.bits;\n    EncodeEnd(data);\n    data.padToMultiple(8, false);\n    data.padToInf(0b11101100_00010001, 16);\n\n    const versionedCorrection = correctionLevel.versions[version - 1];\n    if (versionedCorrection.capacity * 8 < endOfUsefulData) {\n      continue;\n    }\n    const ec = calculateEC(data, versionedCorrection);\n    const { code, path } = getBase(version);\n    drawCode(code, path, ec);\n    if (mask) {\n      applyMask(code, mask, correctionLevel.id);\n      return code;\n    }\n    let bestMasked = null;\n    let bestMaskScore = Number.POSITIVE_INFINITY;\n    masks.forEach((m) => {\n      const masked = new Bitmap2D(code);\n      applyMask(masked, m, correctionLevel.id);\n      const score = scoreCode(masked);\n      if (score < bestMaskScore) {\n        bestMasked = masked;\n        bestMaskScore = score;\n      }\n    });\n    return bestMasked;\n  }\n  throw new Error('Insufficient storage space for data');\n}\n"],"sourceRoot":""}