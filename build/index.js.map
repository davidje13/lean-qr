{"version":3,"sources":["webpack://lean-qr/webpack/universalModuleDefinition","webpack://lean-qr/webpack/bootstrap","webpack://lean-qr/./src/qr/options/corrections.mjs","webpack://lean-qr/./src/qr/options/modes.mjs","webpack://lean-qr/./src/structures/Bitmap1D.mjs","webpack://lean-qr/./src/structures/Bitmap2D.mjs","webpack://lean-qr/./src/qr/options/masks.mjs","webpack://lean-qr/./src/qr/galoisPolynomial.mjs","webpack://lean-qr/./src/qr/errorCorrection.mjs","webpack://lean-qr/./src/qr/draw.mjs","webpack://lean-qr/./src/qr/score.mjs","webpack://lean-qr/./src/qr/generate.mjs"],"names":["root","factory","exports","module","define","amd","global","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","pixelsForVersion","version","size","total","numAlignment","Math","floor","calculate","data","versions","totalBytes","capacity","ecsize","bsize","totalBlocks","g2n","groups","push","capBits","id","v","names","min","L","M","Q","H","max","alnum","indexOf","multi","encodings","forEach","enc","numeric","addInt","length","Number","substr","alphaNumeric","iso8859_1","bytes","TextEncoder","encode","Bitmap1D","constructor","capacityBytes","this","Uint8Array","bits","b","padToByte","Bitmap2D","width","height","x","y","masked","set","mask","xorNoMask","LOG","e","ln","mult256PolyLn","p1Ln","p2Ln","result","j","map","rem256Poly","num","denLn","remainder","shift","slice","generators","last","next","interleave","target","offset","blocks","lim","block","calculateEC","versionBytes","eccs","nBlocks","pos","remBinPoly","den","denBits","drawRect","code","x1","y1","x2","y2","drawPlacement","drawAlignment","drawCode","path","bit","applyMask","maskId","ecId","info","pattern","chk","state","hv","state0","fn","scoreCode","score","undefined","consec","cur","scoreLines","lastV","lastM","curV","curM","countBoxes","countPatterns","totalOn","abs","scoreImbalance","baseCache","Map","getBase","has","stepAlignment","vInfo","drawFrame","h","xB","dirY","getPath","cached","pickMask","correction","bestMasked","bestMaskScore","POSITIVE_INFINITY","masks","generate","modeData","minCorrectionLevel","correctionNames","maxCorrectionLevel","minVersion","maxVersion","Error","dataLengthBits","correctionData","cl","versionedCorrection"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"lean-qr\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"lean-qr\"] = factory();\n\telse\n\t\troot[\"lean-qr\"] = factory();\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/* eslint-disable array-bracket-spacing, no-multi-spaces, operator-linebreak */\n\nfunction pixelsForVersion(version) {\n  const size = version * 4 + 17;\n  let total = (\n    size * size            // total area\n    - (9 * 9 + 9 * 8 * 2)  // placement\n    - (size - (9 + 8)) * 2 // timing pattern\n  );\n  if (version >= 2) {\n    const numAlignment = Math.floor(version / 7) + 2;\n    total -= (\n      5 * 5 * (numAlignment * numAlignment - 3) // alignment blocks\n      - 5 * 2 * (numAlignment - 2) // do not overcount timing pattern/alignment overlap\n    );\n  }\n  if (version >= 7) {\n    total -= 3 * 6 * 2; // version identifiers\n  }\n  return total;\n}\n\nfunction calculate(data) {\n  const versions = [{}];\n  for (let version = 1; version <= 40; ++version) {\n    const totalBytes = Math.floor(pixelsForVersion(version) / 8);\n    const [capacity, ecsize] = data[version - 1];\n    const bsize = Math.floor((capacity * ecsize) / (totalBytes - capacity));\n    const totalBlocks = Math.floor(capacity / bsize);\n    const g2n = capacity - (totalBlocks * bsize);\n    const g1n = totalBlocks - g2n;\n    const groups = [[g1n, bsize]];\n    if (g2n) {\n      groups.push([g2n, bsize + 1]);\n    }\n    versions.push({\n      capBits: capacity * 8,\n      groups,\n      ecsize,\n    });\n  }\n  return versions;\n}\n\n// TODO: identify algorithm for these values\n// Thanks, https://www.thonky.com/qr-code-tutorial/error-correction-table\n\nconst LData = [\n  [  19,  7], [  34, 10], [  55, 15], [  80, 20], [ 108, 26],\n  [ 136, 18], [ 156, 20], [ 194, 24], [ 232, 30], [ 274, 18],\n  [ 324, 20], [ 370, 24], [ 428, 26], [ 461, 30], [ 523, 22],\n  [ 589, 24], [ 647, 28], [ 721, 30], [ 795, 28], [ 861, 28],\n  [ 932, 28], [1006, 28], [1094, 30], [1174, 30], [1276, 26],\n  [1370, 28], [1468, 30], [1531, 30], [1631, 30], [1735, 30],\n  [1843, 30], [1955, 30], [2071, 30], [2191, 30], [2306, 30],\n  [2434, 30], [2566, 30], [2702, 30], [2812, 30], [2956, 30],\n];\n\nconst MData = [\n  [  16, 10], [  28, 16], [  44, 26], [  64, 18], [  86, 24],\n  [ 108, 16], [ 124, 18], [ 154, 22], [ 182, 22], [ 216, 26],\n  [ 254, 30], [ 290, 22], [ 334, 22], [ 365, 24], [ 415, 24],\n  [ 453, 28], [ 507, 28], [ 563, 26], [ 627, 26], [ 669, 26],\n  [ 714, 26], [ 782, 28], [ 860, 28], [ 914, 28], [1000, 28],\n  [1062, 28], [1128, 28], [1193, 28], [1267, 28], [1373, 28],\n  [1455, 28], [1541, 28], [1631, 28], [1725, 28], [1812, 28],\n  [1914, 28], [1992, 28], [2102, 28], [2216, 28], [2334, 28],\n];\n\nconst QData = [\n  [  13, 13], [  22, 22], [  34, 18], [  48, 26], [  62, 18],\n  [  76, 24], [  88, 18], [ 110, 22], [ 132, 20], [ 154, 24],\n  [ 180, 28], [ 206, 26], [ 244, 24], [ 261, 20], [ 295, 30],\n  [ 325, 24], [ 367, 28], [ 397, 28], [ 445, 26], [ 485, 30],\n  [ 512, 28], [ 568, 30], [ 614, 30], [ 664, 30], [ 718, 30],\n  [ 754, 28], [ 808, 30], [ 871, 30], [ 911, 30], [ 985, 30],\n  [1033, 30], [1115, 30], [1171, 30], [1231, 30], [1286, 30],\n  [1354, 30], [1426, 30], [1502, 30], [1582, 30], [1666, 30],\n];\n\nconst HData = [\n  [   9, 17], [  16, 28], [  26, 22], [  36, 16], [  46, 22],\n  [  60, 28], [  66, 26], [  86, 26], [ 100, 24], [ 122, 28],\n  [ 140, 24], [ 158, 28], [ 180, 22], [ 197, 24], [ 223, 24],\n  [ 253, 30], [ 283, 28], [ 313, 28], [ 341, 26], [ 385, 28],\n  [ 406, 30], [ 442, 24], [ 464, 30], [ 514, 30], [ 538, 30],\n  [ 596, 30], [ 628, 30], [ 661, 30], [ 701, 30], [ 745, 30],\n  [ 793, 30], [ 845, 30], [ 901, 30], [ 961, 30], [ 986, 30],\n  [1054, 30], [1096, 30], [1142, 30], [1222, 30], [1276, 30],\n];\n\nexport const data = [\n  { id: 0b01, v: calculate(LData) },\n  { id: 0b00, v: calculate(MData) },\n  { id: 0b11, v: calculate(QData) },\n  { id: 0b10, v: calculate(HData) },\n];\n\nexport const names = {\n  min: 0,\n  L: 0,\n  M: 1,\n  Q: 2,\n  H: 3,\n  max: 3,\n};\n","const alnum = (c) => '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:'.indexOf(c);\n\nexport default {\n  multi: (...encodings) => (data, version) => encodings.forEach((enc) => enc(data, version)),\n\n  numeric: (value) => (data, version) => {\n    data.addInt(0b0001, 4);\n    data.addInt(value.length, version < 10 ? 10 : version < 27 ? 12 : 14);\n    let i = 0;\n    for (; i < value.length - 2; i += 3) {\n      data.addInt(Number(value.substr(i, 3)), 10);\n    }\n    if (i < value.length - 1) {\n      data.addInt(Number(value.substr(i, 2)), 7);\n    } else if (i < value.length) {\n      data.addInt(Number(value.substr(i, 1)), 4);\n    }\n  },\n\n  alphaNumeric: (value) => (data, version) => {\n    data.addInt(0b0010, 4);\n    data.addInt(value.length, version < 10 ? 9 : version < 27 ? 11 : 13);\n    let i = 0;\n    for (; i < value.length - 1; i += 2) {\n      data.addInt(alnum(value[i]) * 45 + alnum(value[i + 1]), 11);\n    }\n    if (i < value.length) {\n      data.addInt(alnum(value[i]), 6);\n    }\n  },\n\n  iso8859_1: (value) => {\n    const bytes = new TextEncoder('iso-8859-1').encode(value);\n    return (data, version) => {\n      data.addInt(0b0100, 4);\n      data.addInt(bytes.length, version < 10 ? 8 : 16);\n      for (let i = 0; i < bytes.length; ++i) {\n        data.addInt(bytes[i], 8);\n      }\n    };\n  },\n};\n","export default class Bitmap1D {\n  constructor(capacityBytes) {\n    this.bytes = new Uint8Array(capacityBytes);\n    this.bits = 0;\n  }\n\n  addInt(value, bits) {\n    for (let b = bits, r = 8 - (this.bits & 7); b > 0; b -= r, r = 8) {\n      this.bytes[this.bits >>> 3] |= ((value << r) >>> b);\n      this.bits += Math.min(b, r);\n    }\n  }\n\n  padToByte() {\n    this.bits = (this.bits + 7) & ~7;\n  }\n}\n","export default class Bitmap2D {\n  constructor(width, height) {\n    if (width instanceof Bitmap2D) {\n      this.width = width.width;\n      this.height = width.height;\n      this.d = new Uint8Array(width.d);\n    } else {\n      this.width = width;\n      this.height = height;\n      this.d = new Uint8Array(width * height);\n    }\n  }\n\n  get(x, y) {\n    return !!(this.d[y * this.width + x] & 0b01);\n  }\n\n  masked(x, y) {\n    return (this.d[y * this.width + x] & 0b10);\n  }\n\n  set(x, y, value, mask = 1) {\n    this.d[y * this.width + x] = (mask * 0b10) | (!!value);\n  }\n\n  xorNoMask(x, y, value) {\n    if (value && !this.masked(x, y)) {\n      this.d[y * this.width + x] ^= 1;\n    }\n  }\n}\n","export default [\n  (x, y) => !((x ^ y) & 1),\n  (x, y) => !(y & 1),\n  (x) => !(x % 3),\n  (x, y) => !((x + y) % 3),\n  (x, y) => !((Math.floor(x / 3) ^ Math.floor(y / 2)) & 1),\n  (x, y) => !((x & y & 1) ^ ((x * y) % 3)),\n  (x, y) => !(((x & y & 1) + ((x * y) % 3)) & 1),\n  (x, y) => !((((x ^ y) & 1) + ((x * y) % 3)) & 1),\n];\n","const LOG = new Uint8Array(512);\nLOG[0] = 1;\nfor (let i = 0, v = 1; i < 255; LOG[++i] = v) {\n  LOG[v + 256] = i;\n  v *= 2;\n  if (v & 256) {\n    v ^= 285;\n  }\n}\nconst e = (x) => LOG[x % 255]; // assume x is never negative\nconst ln = (x) => LOG[x + 256];\n\nexport function mult256PolyLn(p1Ln, p2Ln) {\n  const result = new Uint8Array(p1Ln.length + p2Ln.length - 1);\n  for (let i = 0; i < p1Ln.length; ++i) {\n    for (let j = 0; j < p2Ln.length; ++j) {\n      result[i + j] ^= e(p1Ln[i] + p2Ln[j]);\n    }\n  }\n  return result.map(ln);\n}\n\nexport function rem256Poly(num, denLn) {\n  const remainder = new Uint8Array(num.length + denLn.length - 1);\n  remainder.set(num, 0);\n  for (let i = 0; i < num.length; ++i) {\n    if (remainder[i]) {\n      // assume denLn[0] === 0 (true for all generator polys)\n      const shift = ln(remainder[i]); // - denLn[0];\n      for (let j = 0; j < denLn.length; ++j) {\n        remainder[i + j] ^= e(denLn[j] + shift);\n      }\n    }\n  }\n  return remainder.slice(num.length);\n}\n","import { mult256PolyLn, rem256Poly } from './galoisPolynomial.mjs';\n\nconst generators = [[0], [0, 0]];\nfor (let i = 1, last = generators[1]; i < 30; ++i) {\n  const next = mult256PolyLn(last, [0, i]);\n  generators.push(next);\n  last = next;\n}\n\nfunction interleave(target, offset, blocks) {\n  /* eslint-disable no-param-reassign, no-loop-func */\n  let p = offset;\n  const lim = Math.max(...blocks.map((block) => block.length));\n  for (let i = 0; i < lim; ++i) {\n    blocks.forEach((block) => {\n      if (i < block.length) {\n        target[p++] = block[i];\n      }\n    });\n  }\n  /* eslint-enable no-param-reassign, no-loop-func */\n  return p;\n}\n\nexport default function calculateEC(versionBytes, { groups, ecsize }) {\n  const blocks = [];\n  const eccs = [];\n\n  let p = 0;\n  let size = 0;\n  groups.forEach(([nBlocks, bytes]) => {\n    for (let b = 0; b < nBlocks; ++b, p += bytes) {\n      const block = versionBytes.slice(p, p + bytes);\n      blocks.push(block);\n      eccs.push(rem256Poly(block, generators[ecsize]));\n    }\n    size += nBlocks * (bytes + ecsize);\n  });\n\n  const result = new Uint8Array(size);\n  const pos = interleave(result, 0, blocks);\n  interleave(result, pos, eccs);\n  return result;\n}\n","function remBinPoly(num, den, denBits) {\n  let remainder = num << (denBits - 1);\n  for (let i = 0x40000000; i; i >>>= 1) {\n    if (remainder & i) {\n      remainder ^= den * (i >>> (denBits - 1));\n    }\n  }\n  return remainder;\n}\n\nfunction drawRect(code, x1, y1, x2, y2, value) {\n  for (let y = y1; y < y2; ++y) {\n    for (let x = x1; x < x2; ++x) {\n      code.set(x, y, value);\n    }\n  }\n}\n\nfunction drawPlacement(code, x, y) {\n  drawRect(code, x - 3, y - 3, x + 4, y + 4, 1);\n  drawRect(code, x - 2, y - 2, x + 3, y + 3, 0);\n  drawRect(code, x - 1, y - 1, x + 2, y + 2, 1);\n}\n\nfunction drawAlignment(code, x, y) {\n  drawRect(code, x - 2, y - 2, x + 3, y + 3, 1);\n  drawRect(code, x - 1, y - 1, x + 2, y + 2, 0);\n  code.set(x, y, 1);\n}\n\nexport function drawFrame(code, version) {\n  const size = version * 4 + 17;\n  drawPlacement(code, 3, 3);\n  drawPlacement(code, size - 4, 3);\n  drawPlacement(code, 3, size - 4);\n  drawRect(code, 0, 7, 9, 9, 0);\n  drawRect(code, 7, 0, 9, 7, 0);\n  drawRect(code, size - 8, 7, size, 9, 0);\n  drawRect(code, size - 8, 0, size - 7, 7, 0);\n  drawRect(code, 7, size - 8, 9, size, 0);\n  drawRect(code, 0, size - 8, 7, size - 7, 0);\n  code.set(8, size - 8, 1);\n  for (let i = 8; i < size - 8; ++i) {\n    code.set(i, 6, !(i & 1));\n    code.set(6, i, !(i & 1));\n  }\n  if (version >= 2) {\n    const numAlignment = Math.floor(version / 7) + 2;\n    const stepAlignment = (size - 13) / (numAlignment - 1);\n    for (let i = 0; i < numAlignment; ++i) {\n      for (let j = 0; j < numAlignment; ++j) {\n        if (\n          (i === 0 && j === 0) ||\n          (i === 0 && j === numAlignment - 1) ||\n          (i === numAlignment - 1 && j === 0)\n        ) {\n          continue;\n        }\n        drawAlignment(code, i * stepAlignment + 6, j * stepAlignment + 6);\n      }\n    }\n  }\n  if (version >= 7) {\n    const vInfo = (version << 12) | remBinPoly(version, 0b1111100100101, 13);\n    let m = 1 << 17;\n    for (let j = 6; (j--) > 0;) {\n      for (let i = 0; i < 3; ++i) {\n        const state = vInfo & m;\n        code.set(j, size - 9 - i, state);\n        code.set(size - 9 - i, j, state);\n        m >>>= 1;\n      }\n    }\n  }\n}\n\nexport function getPath(code) {\n  const h = code.height;\n  const result = [];\n  for (let xB = code.width - 2, y = h, dirY = -1; xB >= 0; xB -= 2) {\n    if (xB === 5) { // special case: skip vertical timing pattern line\n      xB = 4;\n    }\n    /* eslint-disable no-cond-assign, no-sequences */\n    while (y += dirY, y !== -1 && y !== h) {\n      if (!code.masked(xB + 1, y)) {\n        result.push([xB + 1, y]);\n      }\n      if (!code.masked(xB, y)) {\n        result.push([xB, y]);\n      }\n    }\n    /* eslint-enable no-cond-assign, no-sequences */\n    dirY *= -1;\n  }\n  return result;\n}\n\nexport function drawCode(target, path, data) {\n  path.forEach(([x, y], bit) => target.set(x, y, (data[bit >> 3] << (bit & 7)) & 0x80, 0));\n}\n\nexport function applyMask(target, mask, maskId, ecId) {\n  for (let y = 0; y < target.height; ++y) {\n    for (let x = 0; x < target.width; ++x) {\n      target.xorNoMask(x, y, mask(x, y));\n    }\n  }\n  const info = ((ecId << 3) | maskId);\n  const pattern = 0b101010000010010 ^ ((info << 10) | remBinPoly(info, 0b10100110111, 11));\n  let chk = 0b100000000000000;\n  for (let i = 0; i < 7; ++i) {\n    const state = pattern & chk;\n    target.set(i === 6 ? 7 : i, 8, state);\n    target.set(8, target.height - i - 1, state);\n    chk >>>= 1;\n  }\n  for (let i = 0; i < 8; ++i) {\n    const state = pattern & chk;\n    target.set(8, (i > 1 ? 7 : 8) - i, state);\n    target.set(target.width - 8 + i, 8, state);\n    chk >>>= 1;\n  }\n}\n","function hv(code, state0, fn) {\n  for (let y = 0; y < code.height; ++y) {\n    let state = state0;\n    for (let x = 0; x < code.width; ++x) {\n      state = fn(state, code.get(x, y));\n    }\n  }\n  for (let x = 0; x < code.width; ++x) {\n    let state = state0;\n    for (let y = 0; y < code.height; ++y) {\n      state = fn(state, code.get(x, y));\n    }\n  }\n}\n\nfunction scoreLines(code) {\n  let score = 0;\n  hv(code, [0, undefined], ([consec, last], cur) => {\n    if (cur !== last) {\n      return [1, cur];\n    }\n    if (consec === 4) {\n      score += 3;\n    } else if (consec > 4) {\n      ++score;\n    }\n    return [consec + 1, last];\n  });\n  return score;\n}\n\nfunction countBoxes(code) {\n  let score = 0;\n  for (let x = 0; x < code.width - 1; ++x) {\n    let lastV = code.get(x, 0);\n    let lastM = code.get(x + 1, 0) === lastV;\n    for (let y = 0; y < code.height - 1; ++y) {\n      const curV = code.get(x, y);\n      const curM = code.get(x + 1, y) === curV;\n      if (lastM && curM && lastV === curV) {\n        ++score;\n      } else {\n        lastV = curV;\n        lastM = curM;\n      }\n    }\n  }\n  return score;\n}\n\nfunction countPatterns(code) {\n  let score = 0;\n  /* eslint-disable no-multi-spaces */\n  const begin   = 0b10000000000_10000000000;\n  const pattern = 0b10111010000_00001011101;\n  const end     = 0b00000000001_00000000001;\n  /* eslint-enable no-multi-spaces */\n  hv(code, 0, (state, cur) => {\n    const next = ((state >>> 1) | begin) & (pattern ^ (cur ? 0 : -1));\n    if (next & end) {\n      ++score;\n    }\n    return next;\n  });\n  return score;\n}\n\nfunction scoreImbalance(code) {\n  let totalOn = 0;\n  for (let y = 0; y < code.height; ++y) {\n    for (let x = 0; x < code.width; ++x) {\n      totalOn += code.get(x, y);\n    }\n  }\n  return Math.floor(20 * Math.abs(totalOn / (code.width * code.height) - 0.5)) * 10;\n}\n\nexport default function scoreCode(code) {\n  return (\n    scoreLines(code) +\n    countBoxes(code) * 3 +\n    countPatterns(code) * 40 +\n    scoreImbalance(code)\n  );\n}\n","import Bitmap1D from '../structures/Bitmap1D.mjs';\nimport Bitmap2D from '../structures/Bitmap2D.mjs';\nimport masks from './options/masks.mjs';\nimport { data as correctionData, names as correctionNames } from './options/corrections.mjs';\nimport calculateEC from './errorCorrection.mjs';\nimport {\n  drawFrame,\n  getPath,\n  drawCode,\n  applyMask,\n} from './draw.mjs';\nimport scoreCode from './score.mjs';\n\nconst baseCache = new Map();\n\nfunction getBase(version) {\n  if (!baseCache.has(version)) {\n    const size = version * 4 + 17;\n    const code = new Bitmap2D(size, size);\n    drawFrame(code, version);\n    const path = getPath(code);\n    baseCache.set(version, { code, path });\n  }\n  const cached = baseCache.get(version);\n  return {\n    code: new Bitmap2D(cached.code),\n    path: cached.path,\n  };\n}\n\nfunction pickMask(code, correction) {\n  let bestMasked = null;\n  let bestMaskScore = Number.POSITIVE_INFINITY;\n  masks.forEach((mask, maskId) => {\n    const masked = new Bitmap2D(code);\n    applyMask(masked, mask, maskId, correction.id);\n    const score = scoreCode(masked);\n    if (score < bestMaskScore) {\n      bestMasked = masked;\n      bestMaskScore = score;\n    }\n  });\n  return bestMasked;\n}\n\nexport default function generate(modeData, {\n  minCorrectionLevel = correctionNames.min,\n  maxCorrectionLevel = correctionNames.max,\n  minVersion = 1,\n  maxVersion = 40,\n  mask = null,\n} = {}) {\n  if (maxCorrectionLevel < minCorrectionLevel) {\n    throw new Error('Invalid correction level range');\n  }\n  if (maxVersion < minVersion) {\n    throw new Error('Invalid version range');\n  }\n\n  let dataLengthBits = 0;\n  for (let version = minVersion; version <= maxVersion; ++version) {\n    if (correctionData[minCorrectionLevel].v[version].capBits < dataLengthBits) {\n      continue;\n    }\n\n    const data = new Bitmap1D(2956); // max capacity of any code\n    modeData(data, version);\n    dataLengthBits = data.bits;\n\n    for (let cl = maxCorrectionLevel; cl >= minCorrectionLevel; --cl) {\n      const correction = correctionData[cl];\n      const versionedCorrection = correction.v[version];\n      if (versionedCorrection.capBits < dataLengthBits) {\n        continue;\n      }\n      data.addInt(0b0000, 4);\n      data.padToByte();\n      while (data.bits < versionedCorrection.capBits) {\n        data.addInt(0b11101100_00010001, 16);\n      }\n      const { code, path } = getBase(version);\n      drawCode(code, path, calculateEC(data.bytes, versionedCorrection));\n      if (mask !== null) {\n        applyMask(code, masks[mask], mask, correction.id);\n        return code;\n      }\n      return pickMask(code, correction);\n    }\n  }\n  throw new Error('Too much data');\n}\n"],"sourceRoot":""}